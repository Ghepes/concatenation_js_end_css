(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[77164],{

/***/ 960817:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(937744);self._456c437108d2d2713799e19380be528d = self._456c437108d2d2713799e19380be528d || {};(function(__c) {var ngk,ogk,qgk,sgk,tgk,wgk,ygk,zgk,Agk,Bgk,Dgk,mgk;ngk=async function(a,{ua:b}){var c;const d=b!=null?(c=a.V)===null||c===void 0?void 0:c.startSpan("idb_connection_manager.open_idb_connection",b):void 0,e=mgk.open(a.Ppk,()=>{a.connection===e&&(a.connection=void 0)}).catch(f=>{a.connection=void 0;d===null||d===void 0||d.setStatus("error");throw f;}).finally(()=>d===null||d===void 0?void 0:d.end());return e};
ogk=async function(a,b,{ua:c}){var d;const e=c!=null?(d=a.V)===null||d===void 0?void 0:d.startSpan("idb_connection_manager.get_connection",c):void 0;try{if(a.connection==null||(b===null||b===void 0?0:b.GOq))a.connection=ngk(a,{ua:c});let f=await a.connection;f.isOpen||(a.connection=ngk(a,{ua:c}),f=await a.connection);return f}catch(f){throw e===null||e===void 0||e.setStatus("error"),f;}finally{e===null||e===void 0||e.end()}};
qgk=function(a){return a.name==="QuotaExceededError"||a instanceof DOMException&&a.code===22?!0:pgk.some(b=>b.test(a.message))};sgk=function(a){return!self.indexedDB||a instanceof __c.kpb||a instanceof DOMException&&["AbortError","TransactionInactiveError"].includes(a.name)?!0:rgk.some(b=>b.test(a.message))};
tgk=async function({transaction:a,callback:b}){try{const d=await b(a);try{var c;a===null||a===void 0||(c=a.commit)===null||c===void 0||c.call(a)}catch(e){}return d}catch(d){try{a===null||a===void 0||a.abort()}catch(e){}throw d;}};wgk=function({Ppk:a,V:b}){return new ugk(new vgk(a,b),b!=null?{ADr:({methodName:c})=>{if(!(b==null||Math.random()>.01))return b.sb(`storage_layer.idb_database_manager.execute.${c}`,{attrs:new Map([["sample_rate_override",1]]),timeout:3E5})}}:void 0)};
ygk=async function(a){if(a.TDc!=null)switch(a=await a.TDc.getStatus(),a){case 1:case 2:break;case 3:case void 0:throw new xgk;default:throw new __c.v(a);}};zgk=function(a,b){return{key:a,record:b}};Agk=function(a){if(typeof a!=="object"||a==null)throw Error("Result is not an object");a=a.key;if(typeof a!=="string")throw Error("Key is not a string");return a};
Bgk=function(a){if(typeof a!=="object"||a==null)throw Error("Result is not an object");a=a.record;if(a==null)throw Error("Value is undefined");return a};Dgk=async function(a){try{return(0,__c.Ia)(await __c.npb({name:a.baa,version:1,iEd:b=>{b=b.createObjectStore(a.baa,{keyPath:"key"});if(a.OAa!=null&&a.OAa.length>0)for(const {name:c,y_d:d,...e}of a.OAa)b.createIndex(c,`${"record"}.${d}`,e)},Ond:{type:1,tpd:!0,upd:!0}}))}catch(b){return(0,__c.Ka)(new Cgk(b instanceof Error?b:Error(String(b))))}};
__c.Ggk=function({baa:a,serializer:b,TDc:c,OAa:d=[],V:e}){return new Egk(a,b,wgk({Ppk:new Fgk(a,d),V:e}),c)};
mgk=class{static async open(a,b){a=await Dgk(a);if(!a.ok)throw a.error;const c=a.value,d=()=>{e.connection=void 0;c.removeEventListener("close",d)};c.addEventListener("close",d,{once:!0});const e=new mgk({transaction:(f,g)=>c.transaction(f,g),close:()=>{d();c.close();b()}});e.IPh=self.setTimeout(()=>{e.dispose()},2500);return e}get isOpen(){return this.connection!=null}aNf(a,b){if(this.connection==null)throw Error("Attempted to open a transaction on a closed connection");self.clearTimeout(this.IPh);
this.IPh=void 0;const c=this.connection;try{this.$_k++;const d=c.transaction(a,b),e=d.Fcb;e.catch(()=>this.dispose()).finally(()=>{this.$_k--;this.$_k<=0&&(this.IPh=self.setTimeout(()=>{this.dispose()},2500))});return{transaction:d,djd:e}}catch(d){throw this.dispose(),d;}}dispose(){var a;(a=this.connection)===null||a===void 0||a.close();this.connection=void 0;self.clearTimeout(this.IPh)}constructor(a){this.connection=a;this.$_k=0}};var vgk=class{constructor(a,b){this.Ppk=a;this.V=b}};var Hgk,xgk,Cgk,Igk;Hgk=class extends Error{constructor(a){super("Quota exceeded");this.cause=a}};xgk=class extends Error{constructor(){super("Consent required")}};Cgk=class extends __c.rea{constructor(a){super("IndexedDb Database Error",0);this.cause=a}};Igk=class extends Error{constructor(){super("Maximum number of rows exceeded for put request")}};__c.Jgk=class extends Error{constructor(a){super("Failed to deserialize stored data");this.cause=a}};var pgk=[/Encountered full disk while opening backing store for indexedDB.open./i,/Failed to PutOrAdd in database because not enough space for domain/i],rgk=[/(transaction|operation) was aborted/i,/The database connection is closing/i,/connection to indexed database server lost/i,/internal error/i,/the transaction is inactive or finished/i,/unable to open database file on disk/i,/without an in-progress transaction/i,/The user denied permission to access the database\./];var ugk=class{async pra({agd:a,mode:b,methodName:c},d){var e;const f=(e=this.V)===null||e===void 0?void 0:e.ADr({methodName:c});try{try{const h=(await ogk(this.x5m,{},{ua:f})).aNf(a,b),[k]=await Promise.all([tgk({transaction:h.transaction,callback:d}),h.djd]);return k}catch(h){const k=(await ogk(this.x5m,{GOq:!0},{ua:f})).aNf(a,b),[l]=await Promise.all([tgk({transaction:k.transaction,callback:d}),k.djd]);return l}}catch(h){const k=h instanceof Error?h:Error(String(h));var g=k instanceof Cgk||k instanceof
Hgk?k:qgk(k)?new Hgk(k):sgk(k)?new Cgk(k):k;g instanceof xgk||g instanceof __c.Jgk||g instanceof Igk||g instanceof Hgk||(f===null||f===void 0||f.setAttribute("error",h instanceof Error?h.message:String(h)),f===null||f===void 0||f.end("error"));throw g;}finally{f===null||f===void 0||f.end("ok")}}constructor(a,b){this.x5m=a;this.V=b}};var Egk=class{async put(a,b,c){await ygk(this);const d=zgk(a,this.serializer.serialize(b));return this.m6c.pra({agd:this.baa,mode:"readwrite",methodName:"put"},async e=>{e=e.objectStore(this.baa);const {$Qu:f}=c!==null&&c!==void 0?c:{};if(f!=null){__c.pa(f>0);const [g,h]=await Promise.all([e.get(a).then(k=>!!k),e.count()]);if(h+(g?0:1)>f)throw new Igk;}await e.put(d)})}async get(a){const b=await this.m6c.pra({agd:this.baa,mode:"readonly",methodName:"get"},async c=>c.objectStore(this.baa).get(a));
return b!=null?this.deserialize(Bgk(b)):void 0}async delete(a){return this.m6c.pra({agd:this.baa,mode:"readwrite",methodName:"delete"},async b=>{const c=b.objectStore(this.baa);Array.isArray(a)?await Promise.all(a.map(d=>c.delete(d))):await c.delete(a)})}async count(){return this.m6c.pra({agd:this.baa,mode:"readonly",methodName:"count"},async a=>a.objectStore(this.baa).count())}async update(a,b){await ygk(this);return this.m6c.pra({agd:this.baa,mode:"readwrite",methodName:"update"},async c=>{c=c.objectStore(this.baa);
var d=await c.get(a);d=d?{value:this.deserialize(Bgk(d))}:void 0;d=b(d);d!=null?await c.put(zgk(a,this.serializer.serialize(d.value))):await c.delete(a)})}async R3i(a,b){await ygk(this);return this.m6c.pra({agd:this.baa,mode:"readwrite",methodName:"updateMany"},async c=>{const d=c.objectStore(this.baa);await Promise.all(a.map(async e=>{var f=await d.get(e);f=f?{value:this.deserialize(Bgk(f))}:void 0;f=b(f,e);f!=null?await d.put(zgk(e,this.serializer.serialize(f.value))):await d.delete(e)}))})}async updateAll(a,
b,c){await ygk(this);return this.m6c.pra({agd:this.baa,mode:"readwrite",methodName:"updateAll"},async d=>{const e=d.objectStore(this.baa);d=await (typeof c==="string"?e.index(c):e).getAll(b);await Promise.all(d.map(async f=>{const g=Agk(f);f=this.deserialize(Bgk(f));f=a({value:f},g);f!=null?await e.put(zgk(g,this.serializer.serialize(f.value))):await e.delete(g)}))})}async getAll(a,b){const c=await this.m6c.pra({agd:this.baa,mode:"readonly",methodName:"getAll"},async f=>{f=f.objectStore(this.baa);
const g=typeof b==="string"?f.index(b):f;try{return(await g.getAll(a)).map(h=>(0,__c.Ia)(h))}catch(h){return f=await g.getAllKeys(a),Promise.all(f.map(async k=>{try{const l=await g.get(k);return(0,__c.Ia)(l)}catch(l){return(0,__c.Ka)({key:String(k),error:l instanceof Error?l:Error(String(l))})}}))}}),d=[],e=[];for(const f of c)if(f.ok)try{d.push({key:Agk(f.value),xl:this.deserialize(Bgk(f.value))})}catch(g){e.push({key:Agk(f.value),error:g instanceof Error?g:Error(String(g))})}else e.push({key:f.error.key,
error:f.error.error});return{items:d,errors:e}}async getAllKeys(){return this.m6c.pra({agd:this.baa,mode:"readonly",methodName:"getAllKeys"},async a=>(await a.objectStore(this.baa).getAllKeys()).map(b=>String(b))||[])}async clear(){return this.m6c.pra({agd:this.baa,mode:"readwrite",methodName:"clear"},async a=>a.objectStore(this.baa).clear())}close(){}deserialize(a){try{return this.serializer.deserialize(a)}catch(b){throw new __c.Jgk(b instanceof Error?b:Error(String(b)));}}constructor(a,b,c,d){this.baa=
a;this.serializer=b;this.m6c=c;this.TDc=d}};var Fgk=class{constructor(a,b){this.baa=a;this.OAa=b}};
}).call(self, self._456c437108d2d2713799e19380be528d);}

}])
//# sourceMappingURL=sourcemaps/730e329cc19c90eb.js.map