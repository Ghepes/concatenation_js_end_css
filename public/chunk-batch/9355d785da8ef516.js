;// __FILE_CONTENT_FOR__:9355d785da8ef516.js
(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[602898],{

/***/ 208159:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(630484);__web_req__(498931);__web_req__(358138);__web_req__(280056);__web_req__(157643);__web_req__(183026);__web_req__(923763);__web_req__(755566);self._ebd5e19490e9b70e7436d6c497657170 = self._ebd5e19490e9b70e7436d6c497657170 || {};(function(__c) {var nvu,qvu,vvu,wvu,svu,xvu,kvu,uvu;__c.lvu=function(a,b={}){const {promise:c,resolve:d,reject:e}=__c.Da();let f;b.timeoutMs!=null&&(f=setTimeout(()=>{e(new jvu);h()},b.timeoutMs));let g=()=>{};const h=()=>{g();f!=null&&clearTimeout(f)};g=kvu(a,k=>{k!=null&&(d(k),h())},{fireImmediately:!0,onError:k=>{e(k);h()}});return{promise:c,dispose:h}};
nvu=function(a){try{if(!window.WebGLRenderingContext)return{X9:!1,reason:"unsupported-browser"};const b=mvu();if(b===!0)return{X9:!0};a===null||a===void 0||a.info(`WebGL Context creation error: ${(b===null||b===void 0?void 0:b.statusMessage)||"No context creation error event emitted"}`);return{X9:!1,reason:"unknown"}}catch(b){return{X9:!1,reason:"unknown"}}};__c.ovu=function(a){const b=a.context;b&&!b.yKc.isRecording()&&!b.editable.isRecording()&&b.Bji&&(b.vx.end("ok"),a.context=void 0)};
__c.pvu=function(a){var b;const c=a.context;c&&(a.context=void 0,c.yKc.end("error"),c.editable.end("error"),(b=c.vx.Ue())!==null&&b!==void 0&&b.addEvent("error_tracing"),c.vx.end("error"))};qvu=function(a,b){var c;return(c=a.context)!==null&&c!==void 0&&c.vx.isRecording()?a.da.he("load_photo_editor",a.context.vx,b).catch(d=>{__c.pvu(a);throw d;}):b()};
vvu=function({history:a,Tc:b,I:c,hmc:d,bRd:e,Rd:f,YLa:g,Ae:h,ja:k,Oaa:l,Cf:n,mY:p,Nb:q,iW:r,sG:u,ha:v,eO:w,qaa:x,session:y,spa:A,rd:B}){const D={mY:p,Nb:q,Ae:h,iW:r,sG:u,ha:v,Nmc:f,I:c,Cf:n,ja:l,bRd:e,eO:w,qaa:x,hmc:d,V:y,spa:A,rd:B},F=({Kaa:I,skeleton:J,closeDialog:O,zk:P,Rze:R})=>{let T=!1;const U=__c.Da();__webpack_require__.me(562816).then(()=>__c.rvu).then(svu(({Gfo:Y})=>{T||(Y=Y({...D,hmc:d,zk:P,Kaa:I,skeleton:J,Rze:R,closeDialog:O}),U.resolve(Y))}));return{promise:U.promise,cancel:()=>{T=!0;
U.reject(Error("CANCELLED"))}}},G=async(I,J)=>{const {kgn:O}=await __webpack_require__.me(255308).then(()=>({kgn:__c.tvu}));return O({Tc:b,I:c,history:a,Rd:f,NGc:I,UOb:J,Zff:F,YLa:B.YLa,mY:p})};return({context:I,location:J,$ob:O,NGc:P,UOb:R,sPb:T})=>{g.dtg(J);return qvu(g,async()=>{try{const {Kaa:U,Dialog:Y,TUo:aa}=await G(P,R);uvu(()=>{U.context=I;k(Y);aa(J,I.type==="uploading"?"upload":"existing",T)});O===null||O===void 0||O()}catch(U){throw __c.pvu(g),v.fb({Za:__c.V("hOvxEQ")}),c.errorService.error(typeof U===
"string"?Error(U):U instanceof Error?U:Error("Unknown error"),{ta:"photo editor failed to install"}),U;}})}};wvu=__webpack_require__(400770);svu=wvu.action;xvu=wvu.observable;kvu=wvu.reaction;uvu=wvu.runInAction;var jvu=class extends Error{};var mvu=()=>{const a=document.createElement("canvas");a.width=0;a.height=0;let b=null;a.addEventListener("webglcontextcreationerror",c=>b=c);return!!a.getContext("webgl")||b};var yvu=class{static G(a){__c.Q(a,{bqj:xvu.ref,wLl:xvu.ref,MWl:xvu.ref,yrj:xvu.ref,nuj:xvu.ref,SVf:xvu.ref,Wii:xvu.ref})}constructor(){this.bqj=(yvu.G(this),void 0);this.Wii=void 0}};var zvu=class{static G(a){__c.Q(a,{qo:xvu.ref})}constructor(){this.qo=(zvu.G(this),void 0)}};var Avu=class{dtg(a){var b;if((b=this.context)===null||b===void 0||!b.vx.isRecording()){a:switch(a){case "camera_roll":case "camera-roll-see-all-button":case "local-media-entrypoint":case "homepage_highlights_card":case "homepage_banner_upload_button":case "social_media_edit_photo_button":case "share_to_canva":case "design-creation-flyout-footer":case "design-creation-list":case "recommended-bg-remover-button":case "recommended-edit-photo-button":a="upload";break a;case "search_bar":case "banner_search_bar":case "folder":case "folder_more_actions":case "home_photo_editor_shortcut":case "design_creation_model_photo_editor_shortcut":a=
"existing";break a;default:throw new __c.t(a);}b=this.da.Ec("photo_editing.open_photo_editor.root",{Hc:{name:"photo_editing.open_photo_editor",type:a,performance:{hHf:!0}},timeout:6E4});this.context=this.createContext(b,a)}}createContext(a,b){const c=this.da.startSpan("rendered",a),d=this.da.startSpan("editable",a),e={vx:a,yKc:c,editable:d,Bji:b==="existing"};c.DI(()=>{e===this.context&&(a.Ue().addEvent("photo_editor_rendered"),__c.ovu(this))});d.DI(()=>{e===this.context&&(a.Ue().addEvent("photo_editor_editable"),
__c.ovu(this))});return e}yQp(){var a;(a=this.context)===null||a===void 0||a.vx.addEvent("photo_editor_viewed")}jJj(){var a;const b=this.context;b&&(this.context=void 0,b.yKc.abort(),b.editable.abort(),(a=b.vx.Ue())===null||a===void 0||a.addEvent("cancel_tracing"),b.vx.end("ok"))}cMe(){var a;(a=this.context)===null||a===void 0||a.vx.abort();this.context=void 0}constructor(a){this.da=a}};__c.Rpa={Rhn:function({history:a,session:b,mY:c,Nb:d,spa:e,ob:f,ha:g,iW:h,sG:k,Tc:l,I:n,Rd:p,Cf:q,ja:r,Oaa:u,eO:v,za:w}){if(c===null||c===void 0||!c.ZJh||c.Kwn&&!nvu(n.errorService).X9)return{xCi:void 0,K1d:()=>{},Wia:void 0,YLa:void 0,P7c:void 0,spa:e};const x=new yvu,y=new zvu,A=__c.Ha(()=>__webpack_require__.me(304160).then(()=>__c.Bvu).then(({jqm:G})=>new G)),B=w.qd("home.photo_editing"),D=new Avu(B),F=vvu({history:a,Tc:l,I:n,Rd:p,d3q:A,YLa:D,Ae:(G,I)=>f.Tj(__c.cC.NH,G,{trigger:I}),hmc:async(G,
I)=>{await (await (await __c.lvu(()=>y.qo).promise)()).MS({item:G,maa:I});return G.media},bRd:(G,I)=>{const J=__c.Rf(G);G=__c.lvu(()=>y.qo).promise.then(O=>O()).then(O=>O.Xol([J],I));return{mW:J,promise:G}},ja:r,Oaa:u,xCi:y,Cf:q,mY:c,Nb:d,iW:h,sG:k,ha:g,eO:v,qaa:x,session:b,spa:e,rd:{da:B,za:w,YLa:D}});return{xCi:y,K1d:({No:G})=>{c!==null&&c!==void 0&&c.ZJh&&G.mDb("photoFolderResult",__c.cD({Ko:"edit_photo",order:5,getLabel:()=>__c.V("A/ytcA"),getIcon:()=>__c.Zlo,Sr:I=>I.type===1&&I.Ep===!0,Ot:I=>
F({context:{type:"foldered",mW:I},location:"folder_more_actions"})}))},Wia:F,YLa:D,P7c:x,spa:e}}};
}).call(self, self._ebd5e19490e9b70e7436d6c497657170);}

}])
//# sourceMappingURL=https://chunk-composing.canva.com/chunk-batch-sm/17_sourcemaps/9355d785da8ef516.js.map