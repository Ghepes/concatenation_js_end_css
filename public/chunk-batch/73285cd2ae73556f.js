(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[77164],{

/***/ 960817:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(937744);self._456c437108d2d2713799e19380be528d = self._456c437108d2d2713799e19380be528d || {};(function(__c) {var Kgk,Lgk,Ngk,Pgk,Qgk,Tgk,Vgk,Wgk,Xgk,Ygk,$gk,Jgk;Kgk=async function(a,{ua:b}){var c;const d=b!=null?(c=a.P)===null||c===void 0?void 0:c.startSpan("idb_connection_manager.open_idb_connection",b):void 0,e=Jgk.open(a.Wqk,()=>{a.connection===e&&(a.connection=void 0)}).catch(f=>{a.connection=void 0;d===null||d===void 0||d.setStatus("error");throw f;}).finally(()=>d===null||d===void 0?void 0:d.end());return e};
Lgk=async function(a,b,{ua:c}){var d;const e=c!=null?(d=a.P)===null||d===void 0?void 0:d.startSpan("idb_connection_manager.get_connection",c):void 0;try{if(a.connection==null||(b===null||b===void 0?0:b.oQq))a.connection=Kgk(a,{ua:c});let f=await a.connection;f.isOpen||(a.connection=Kgk(a,{ua:c}),f=await a.connection);return f}catch(f){throw e===null||e===void 0||e.setStatus("error"),f;}finally{e===null||e===void 0||e.end()}};
Ngk=function(a){return a.name==="QuotaExceededError"||a instanceof DOMException&&a.code===22?!0:Mgk.some(b=>b.test(a.message))};Pgk=function(a){return!self.indexedDB||a instanceof __c.ipb||a instanceof DOMException&&["AbortError","TransactionInactiveError"].includes(a.name)?!0:Ogk.some(b=>b.test(a.message))};
Qgk=async function({transaction:a,callback:b}){try{const d=await b(a);try{var c;a===null||a===void 0||(c=a.commit)===null||c===void 0||c.call(a)}catch(e){}return d}catch(d){try{a===null||a===void 0||a.abort()}catch(e){}throw d;}};Tgk=function({Wqk:a,P:b}){return new Rgk(new Sgk(a,b),b!=null?{qFr:({methodName:c})=>{if(!(b==null||Math.random()>.01))return b.sb(`storage_layer.idb_database_manager.execute.${c}`,{attrs:new Map([["sample_rate_override",1]]),timeout:3E5})}}:void 0)};
Vgk=async function(a){if(a.iEc!=null)switch(a=await a.iEc.getStatus(),a){case 1:case 2:break;case 3:case void 0:throw new Ugk;default:throw new __c.v(a);}};Wgk=function(a,b){return{key:a,record:b}};Xgk=function(a){if(typeof a!=="object"||a==null)throw Error("Result is not an object");a=a.key;if(typeof a!=="string")throw Error("Key is not a string");return a};
Ygk=function(a){if(typeof a!=="object"||a==null)throw Error("Result is not an object");a=a.record;if(a==null)throw Error("Value is undefined");return a};$gk=async function(a){try{return(0,__c.Ia)(await __c.lpb({name:a.eaa,version:1,zEd:b=>{b=b.createObjectStore(a.eaa,{keyPath:"key"});if(a.ZAa!=null&&a.ZAa.length>0)for(const {name:c,V_d:d,...e}of a.ZAa)b.createIndex(c,`${"record"}.${d}`,e)},eod:{type:1,Jpd:!0,Kpd:!0}}))}catch(b){return(0,__c.Ka)(new Zgk(b instanceof Error?b:Error(String(b))))}};
__c.chk=function({eaa:a,serializer:b,iEc:c,ZAa:d=[],P:e}){return new ahk(a,b,Tgk({Wqk:new bhk(a,d),P:e}),c)};
Jgk=class{static async open(a,b){a=await $gk(a);if(!a.ok)throw a.error;const c=a.value,d=()=>{e.connection=void 0;c.removeEventListener("close",d)};c.addEventListener("close",d,{once:!0});const e=new Jgk({transaction:(f,g)=>c.transaction(f,g),close:()=>{d();c.close();b()}});e.xQh=self.setTimeout(()=>{e.dispose()},2500);return e}get isOpen(){return this.connection!=null}ONf(a,b){if(this.connection==null)throw Error("Attempted to open a transaction on a closed connection");self.clearTimeout(this.xQh);
this.xQh=void 0;const c=this.connection;try{this.g1k++;const d=c.transaction(a,b),e=d.Wcb;e.catch(()=>this.dispose()).finally(()=>{this.g1k--;this.g1k<=0&&(this.xQh=self.setTimeout(()=>{this.dispose()},2500))});return{transaction:d,ujd:e}}catch(d){throw this.dispose(),d;}}dispose(){var a;(a=this.connection)===null||a===void 0||a.close();this.connection=void 0;self.clearTimeout(this.xQh)}constructor(a){this.connection=a;this.g1k=0}};var Sgk=class{constructor(a,b){this.Wqk=a;this.P=b}};var dhk,Ugk,Zgk,ehk;dhk=class extends Error{constructor(a){super("Quota exceeded");this.cause=a}};Ugk=class extends Error{constructor(){super("Consent required")}};Zgk=class extends __c.rea{constructor(a){super("IndexedDb Database Error",0);this.cause=a}};ehk=class extends Error{constructor(){super("Maximum number of rows exceeded for put request")}};__c.fhk=class extends Error{constructor(a){super("Failed to deserialize stored data");this.cause=a}};var Mgk=[/Encountered full disk while opening backing store for indexedDB.open./i,/Failed to PutOrAdd in database because not enough space for domain/i],Ogk=[/(transaction|operation) was aborted/i,/The database connection is closing/i,/connection to indexed database server lost/i,/internal error/i,/the transaction is inactive or finished/i,/unable to open database file on disk/i,/without an in-progress transaction/i,/The user denied permission to access the database\./];var Rgk=class{async zra({vgd:a,mode:b,methodName:c},d){var e;const f=(e=this.P)===null||e===void 0?void 0:e.qFr({methodName:c});try{try{const h=(await Lgk(this.P6m,{},{ua:f})).ONf(a,b),[k]=await Promise.all([Qgk({transaction:h.transaction,callback:d}),h.ujd]);return k}catch(h){const k=(await Lgk(this.P6m,{oQq:!0},{ua:f})).ONf(a,b),[l]=await Promise.all([Qgk({transaction:k.transaction,callback:d}),k.ujd]);return l}}catch(h){const k=h instanceof Error?h:Error(String(h));var g=k instanceof Zgk||k instanceof
dhk?k:Ngk(k)?new dhk(k):Pgk(k)?new Zgk(k):k;g instanceof Ugk||g instanceof __c.fhk||g instanceof ehk||g instanceof dhk||(f===null||f===void 0||f.setAttribute("error",h instanceof Error?h.message:String(h)),f===null||f===void 0||f.end("error"));throw g;}finally{f===null||f===void 0||f.end("ok")}}constructor(a,b){this.P6m=a;this.P=b}};var ahk=class{async put(a,b,c){await Vgk(this);const d=Wgk(a,this.serializer.serialize(b));return this.J6c.zra({vgd:this.eaa,mode:"readwrite",methodName:"put"},async e=>{e=e.objectStore(this.eaa);const {bUu:f}=c!==null&&c!==void 0?c:{};if(f!=null){__c.na(f>0);const [g,h]=await Promise.all([e.get(a).then(k=>!!k),e.count()]);if(h+(g?0:1)>f)throw new ehk;}await e.put(d)})}async get(a){const b=await this.J6c.zra({vgd:this.eaa,mode:"readonly",methodName:"get"},async c=>c.objectStore(this.eaa).get(a));
return b!=null?this.deserialize(Ygk(b)):void 0}async delete(a){return this.J6c.zra({vgd:this.eaa,mode:"readwrite",methodName:"delete"},async b=>{const c=b.objectStore(this.eaa);Array.isArray(a)?await Promise.all(a.map(d=>c.delete(d))):await c.delete(a)})}async count(){return this.J6c.zra({vgd:this.eaa,mode:"readonly",methodName:"count"},async a=>a.objectStore(this.eaa).count())}async update(a,b){await Vgk(this);return this.J6c.zra({vgd:this.eaa,mode:"readwrite",methodName:"update"},async c=>{c=c.objectStore(this.eaa);
var d=await c.get(a);d=d?{value:this.deserialize(Ygk(d))}:void 0;d=b(d);d!=null?await c.put(Wgk(a,this.serializer.serialize(d.value))):await c.delete(a)})}async R4i(a,b){await Vgk(this);return this.J6c.zra({vgd:this.eaa,mode:"readwrite",methodName:"updateMany"},async c=>{const d=c.objectStore(this.eaa);await Promise.all(a.map(async e=>{var f=await d.get(e);f=f?{value:this.deserialize(Ygk(f))}:void 0;f=b(f,e);f!=null?await d.put(Wgk(e,this.serializer.serialize(f.value))):await d.delete(e)}))})}async updateAll(a,
b,c){await Vgk(this);return this.J6c.zra({vgd:this.eaa,mode:"readwrite",methodName:"updateAll"},async d=>{const e=d.objectStore(this.eaa);d=await (typeof c==="string"?e.index(c):e).getAll(b);await Promise.all(d.map(async f=>{const g=Xgk(f);f=this.deserialize(Ygk(f));f=a({value:f},g);f!=null?await e.put(Wgk(g,this.serializer.serialize(f.value))):await e.delete(g)}))})}async getAll(a,b){const c=await this.J6c.zra({vgd:this.eaa,mode:"readonly",methodName:"getAll"},async f=>{f=f.objectStore(this.eaa);
const g=typeof b==="string"?f.index(b):f;try{return(await g.getAll(a)).map(h=>(0,__c.Ia)(h))}catch(h){return f=await g.getAllKeys(a),Promise.all(f.map(async k=>{try{const l=await g.get(k);return(0,__c.Ia)(l)}catch(l){return(0,__c.Ka)({key:String(k),error:l instanceof Error?l:Error(String(l))})}}))}}),d=[],e=[];for(const f of c)if(f.ok)try{d.push({key:Xgk(f.value),yl:this.deserialize(Ygk(f.value))})}catch(g){e.push({key:Xgk(f.value),error:g instanceof Error?g:Error(String(g))})}else e.push({key:f.error.key,
error:f.error.error});return{items:d,errors:e}}async getAllKeys(){return this.J6c.zra({vgd:this.eaa,mode:"readonly",methodName:"getAllKeys"},async a=>(await a.objectStore(this.eaa).getAllKeys()).map(b=>String(b))||[])}async clear(){return this.J6c.zra({vgd:this.eaa,mode:"readwrite",methodName:"clear"},async a=>a.objectStore(this.eaa).clear())}close(){}deserialize(a){try{return this.serializer.deserialize(a)}catch(b){throw new __c.fhk(b instanceof Error?b:Error(String(b)));}}constructor(a,b,c,d){this.eaa=
a;this.serializer=b;this.J6c=c;this.iEc=d}};var bhk=class{constructor(a,b){this.eaa=a;this.ZAa=b}};
}).call(self, self._456c437108d2d2713799e19380be528d);}

}])
//# sourceMappingURL=sourcemaps/73285cd2ae73556f.js.map