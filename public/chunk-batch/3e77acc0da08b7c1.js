(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[448670],{

/***/ 609763:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(366705);__web_req__(804092);__web_req__(426632);__web_req__(804012);__web_req__(157643);__web_req__(350416);__web_req__(855375);__web_req__(23787);__web_req__(945422);__web_req__(420124);__web_req__(755566);__web_req__(778298);__web_req__(545803);__web_req__(580634);__web_req__(96090);self._ebd5e19490e9b70e7436d6c497657170 = self._ebd5e19490e9b70e7436d6c497657170 || {};(function(__c) {var m=__c.m;var Q4A=function(a,b){if(a.jDa&&b.Va!=="design"&&b.Va!=="template"&&b.Va!=="realFolder"&&a.Cf.Boa(a.jDa)){var c=a.Cf.YH(a.jDa);a.PDa({items:[b],gm:c})}},R4A=async function(a,b){b.Vaa||await a.R8b(b)},S4A=function(a){switch(a.Va){case "folderedVideo":return"videos";case "design":return a.wj?"templates":"designs";case "photoFolderResult":return"photos";case "realFolder":return"folders";case "template":return"templates";default:throw new __c.t(a);}},T4A=__webpack_require__(400770).runInAction;var U4A;
U4A=class{async R8b(a){let b;if(a.key.rf){const c=a.key.rf;b=(await this.dc.Fee(new __c.iGd({brand:c.brand,user:m(c.user,"System folder must have a user attribute"),type:__c.Ps(c.type),SX:!0}))).na}else b=(await this.dc.YH(new __c.xOd({na:m(a.key.id,"Non system folder key must have an id"),SX:!0}))).na;T4A(()=>a.Vaa=b.thumbnail&&b.thumbnail.url)}oHb({item:a,gm:b}){this.Mfh.forEach(c=>c({item:a,na:b}));T4A(()=>{b&&this.PDa({items:[a],gm:b})})}i9c({item:a,pW:b,na:c}){this.SJi.forEach(d=>d({item:a,na:c}));
T4A(()=>{c&&this.mgb({items:[a],pW:b,na:c})})}PDa({items:a,gm:b}){a.forEach(c=>{if(c.itemType!=="file"&&c.itemType!=="audio"){if(b.Vk)if(b.type===2){__c.pa(c.Va==="design","Unexpectedly added a non-design to an OrganizingDesignView");var d=b.Xn(c)}else if(b.type===1)__c.pa(c.Va==="photoFolderResult","Unexpectedly added a non-design to an OrganizingMediaView"),d=b.Xn(c);else throw new __c.t(b);else d=b.Xn(c);a:{switch(c.Va){case "realFolder":case "template":break;case "design":case "folderedVideo":case "photoFolderResult":c=
c.upload;break a;default:throw new __c.t(c);}c=void 0}if(!c||__c.ORd(c))b.$$+=d}});b.Vk||b.KE||R4A(this,b).catch(()=>{})}mgb({items:a,na:b,pW:c}){a.forEach(d=>{if(d.itemType==="file"||d.itemType==="audio")--b.$$;else{var e=S4A(d);d=b.removeItem(d.id,e);b.$$-=d}});if(!b.Vk&&!b.KE){const d=b.Vaa;d&&a.some(e=>d===c(e))&&this.R8b(b).catch(()=>{})}}async oDl({rLa:a,action:{yuf:b,position:c},tVd:d,na:e}){const f=[new __c.jo({id:a.id,type:__c.pTj(a)})],g=new __c.jo({id:b.id,type:__c.pTj(b)});e.dN.KHi({rLa:a,
yuf:b,position:c});b=c==="before"?new __c.pOc({na:e.key,items:f,THb:g}):new __c.oOc({na:e.key,items:f,xSc:g});try{await this.dc.h3k(b)}catch(h){throw e.dN.KHi({rLa:a,...d}),h;}}async ajb({item:a,extension:b,gm:c}){__c.qa(__c.ft(c.access),"Edit access to target folder is required");__c.qa(c.hEa,"User cannot add item to folder");b=new __c.Mdj({na:c.key,items:[new __c.jo({id:a.id,type:__c.pTj(a),extension:b})]});if((c.key.rf?(await this.dc.x1f(new __c.nbk({SWb:!0,brand:c.key.rf.brand,user:m(c.key.rf.user,
"User must exist on systemFolder key"),type:__c.Ps(c.key.rf.type),body:b}))).Bbi:(await this.dc.Q0f(new __c.mbk({SWb:!0,na:m(c.key.id,"ID must exist on folderKey"),body:b}))).Bbi).length>0||c.key.rf&&c.key.rf.type===__c.Ab.Fv)this.OYk({item:a,gm:c}),__c.lA.bOb(c,2,this.userId,this.X,this.Zj,this.qb)}OYk({item:a,gm:b}){b.Va==="realFolder"&&T4A(()=>{this.PDa({items:[a],gm:b})});this.Cjc.forEach(c=>c({item:a,gm:b,pj:void 0}))}wre({item:a,pj:b,gm:c,pW:d,KEl:e}){T4A(()=>{b.Va==="realFolder"&&this.mgb({items:[a],
pW:d,na:b});e&&c.Va==="realFolder"&&this.PDa({items:[a],gm:c})});this.Cjc.forEach(f=>f({item:a,pj:b,gm:c}))}async sKc({item:a,na:b,pW:c}){const d=b.key;__c.qa(!d.rf||d.rf.type!==__c.Ab.Fv);const e=new __c.jOc({na:d,items:[a.id]});d.rf!=null?(__c.qa(d.rf.user!=null,"Expected system folder key to specify user"),await this.dc.MJi(new __c.fun({brand:d.rf.brand,user:d.rf.user,type:__c.Ps(d.rf.type),h9c:!0,body:e}))):await this.dc.yJi(new __c.eun({na:m(d.id,"Invalid folder key passed to FolderItemController.removeItemFromFolder"),
h9c:!0,body:e}));T4A(()=>{this.Cjc.forEach(f=>f({item:a,pj:b,gm:void 0}));b.Va==="realFolder"&&this.mgb({items:[a],na:b,pW:c});Q4A(this,a)})}addListener(a){switch(a.type){case "move":return this.Cjc.add(a.nk),()=>this.Cjc.delete(a.nk);case "add_upload":return this.Mfh.add(a.nk),()=>this.Mfh.delete(a.nk);case "remove_upload":return this.SJi.add(a.nk),()=>this.SJi.delete(a.nk);default:throw new __c.t(a);}}constructor(a,b,c,d,e,f,g=__c.cb){this.jDa=a;this.Cf=b;this.dc=c;this.Zj=d;this.userId=e;this.X=
f;this.qb=g;this.Cjc=new Set;this.Mfh=new Set;this.SJi=new Set}};__c.Hna={};__c.Hna.C8l=U4A;
}).call(self, self._ebd5e19490e9b70e7436d6c497657170);}

}])
//# sourceMappingURL=sourcemaps/3e77acc0da08b7c1.js.map