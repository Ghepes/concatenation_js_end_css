(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[272064],{

/***/ 903336:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(157643);__web_req__(550330);__web_req__(605909);__web_req__(458762);__web_req__(319949);__web_req__(896173);self._ebd5e19490e9b70e7436d6c497657170 = self._ebd5e19490e9b70e7436d6c497657170 || {};(function(__c) {var OOd=__c.OOd;var MPd;var C=__c.C;var E=__c.E;var L=__c.L;var M=__c.M;var z=__c.z;var H=__c.H;var jh=__c.jh;var Db=__c.Db;var ROd=__c.ROd;var Wj=__c.Wj;var Uj=__c.Uj;var YOd,ZOd,$Od,aPd,bPd,cPd,dPd,ePd,gPd,hPd,iPd,jPd,nPd,pPd,qPd,rPd,sPd,tPd,oPd,mPd,uPd,vPd,wPd,xPd,yPd,zPd,APd,BPd,CPd,DPd,EPd,FPd,GPd,HPd,JPd,KPd,NPd,PPd,QPd,kPd,RPd,SPd,TPd,UPd;
__c.VOd=function(a,b,c){return a.rules.filter(d=>{var e,f,g;const h=d.type===3&&((e=d.kb)===null||e===void 0?void 0:e.brand)===c;e=(((f=d.kb)===null||f===void 0?void 0:f.group)===b||((g=d.kb)===null||g===void 0?void 0:g.user)===b)&&d.kb.brand===c;f=a.extension&&d.type===7&&(d.HS!==!0||d.HS&&a.$f.brand===c);if(h||e||f||d.type===8)return!0})};__c.WOd=function(a,b,c){var d;a=__c.VOd(a,b,c);return(d=__c.Lg(a,e=>e.role))===null||d===void 0?void 0:d.role};
__c.XOd=function(a,b){var c;a=a.rules.filter(d=>{var e;return d.type===3&&((e=d.kb)===null||e===void 0?void 0:e.brand)===b});return((c=__c.Lg(a,d=>d.role))===null||c===void 0?void 0:c.role)||1};YOd=function(a,b){switch(b.op){case 2:return b.role<a?b.role:a;case 1:return b.role;case 3:return b.role>a?b.role:a;default:throw new __c.t(b.op);}};
ZOd=function(a,b){if(!b)return a;const c=a.rules.findIndex(h=>h.type===7);var d=c!==-1?a.rules[c]:void 0;const e=b.role;var f=b.HS;const g=b.nac;b=d?YOd(d===null||d===void 0?void 0:d.role,b):e;if(d&&d.role===b&&!!f===!!d.HS&&!!g===!!d.nac)return a;d=new Uj({type:7,...d,role:b,HS:f,nac:g});f=[...a.rules];c!==-1?f[c]=d:f=[...f,d];return new Wj({...a,rules:f})};
$Od=function(a,b){if(!b)return a;let c=!1,d=a.Moa;b.Vze&&(d=d.map(e=>{if(e.identifier===b.identifier&&e.status===1&&b.Vze===2)c=!0;else return e}).filter(__c.Ua));b.xwf&&b.role&&(d=d.map(e=>{if(e.identifier===b.identifier&&e.status===1){if(b.Vze===2){c=!0;return}const f=YOd(e.role,{op:b.xwf,role:b.role});f!==e.role&&(c=!0);return f===1?void 0:{...e,role:f}}return e}).filter(__c.Ua));return c?new Wj({...a,Moa:d}):a};
aPd=function(a,b){return b&&a.rules.find(c=>c.type===8)?new Wj({...a,rules:a.rules.map(c=>c.type===8?new Uj({...c,role:YOd(c.role,b)}):c)}):a};bPd=function(a,b){return a.brand===b.brand&&a.group===b.group&&a.user===b.user};cPd=function(a,b){return(a===null||a===void 0?void 0:a.type)===void 0&&(b===null||b===void 0?void 0:b.type)===1||(a===null||a===void 0?void 0:a.type)===1&&(b===null||b===void 0?void 0:b.type)===void 0?!0:(a===null||a===void 0?void 0:a.type)===(b===null||b===void 0?void 0:b.type)};
dPd=function(a,b){if(!b)return a;let c=!1;const d=a.rules.map(f=>{const g=f.Tfa&&f.Tfa.organization===b.kb.organization&&cPd(f.origin,b.origin)?b.wHa:void 0;if(!g||YOd(f.role,g)===f.role)return f;c=!0;if(g.role!==1||g.op!==1&&g.op!==2)return new Uj({...f,role:YOd(f.role,g)})}).filter(__c.Ua),e=a.rules.some(f=>f.Tfa&&f.Tfa.organization===b.kb.organization)?[]:[new Uj({type:6,Tfa:b.kb,role:b.wHa.role,origin:b.origin,timestamp:b.timestamp})];return c||e.length!==0?new Wj({...a,rules:[...d,...e]}):a};
ePd=function(a,b){if(!b)return a;let c=!1;const d=a.rules.map(f=>{const g=b.find(l=>f.kb&&bPd(f.kb,l.kb)&&cPd(f.origin,l.origin)),h=g===null||g===void 0?void 0:g.wHa,k=g!=null&&g.Caa!==f.Caa;if(!h||YOd(f.role,h)===f.role&&!k)return f;c=!0;if(h.role!==1||h.op!==1&&h.op!==2)return new Uj({...f,Caa:g.Caa,role:YOd(f.role,h)})}).filter(__c.Ua),e=b.filter(f=>!a.rules.some(g=>g.kb&&bPd(g.kb,f.kb))).map(f=>{var g=f.kb;return new Uj({type:g.user?1:g.group?2:3,Caa:f.Caa,kb:f.kb,role:f.wHa.role,origin:f.origin,
timestamp:f.timestamp})});return c||e.length!==0?new Wj({...a,rules:[...d,...e]}):a};__c.fPd=function(a,{xpa:b,Kkc:c,Ehe:d,Gla:e,uXe:f}){b=ePd(a,b);for(const g of c||[])b=dPd(b,g);b=$Od(b,d);b=ZOd(b,e);b=aPd(b,f);return b===a?a:new Wj({...b,version:a.version+1})};gPd=async function(a){try{const {Vo:b}=await a.yb.eV(new __c.Ts({id:a.Pa,extension:a.fc.extension}));ROd(()=>{a.kRf=b})}catch(b){b instanceof __c.jb&&ROd(()=>{a.kRf=1})}};
hPd=function(a){return Db({searchSessionId:a.Md,queryLength:a.Vca,editingContext:a.Ge==null?void 0:jh(a.Ge)})};iPd=function(a){return Db({role:a.role,allow_anonymous_edit_access:a.nac})};jPd=async function(a,b,c){var d;const e=await ((d=a.KSj)===null||d===void 0?void 0:d.call(a,{source:"editor",UHr:c}));e===null||e===void 0||e(b)};__c.lPd=function(a,{XVa:b=!1,location:c}){a.fa.track(kPd,{Pa:a.Pa,q2h:a.UH||a.xva,kQd:a.kQd,XVa:b,location:c})};
nPd=async function(a,b){a=a.fc.Moa.filter(d=>d.status===1&&d.role>1);const c=await Promise.all(a.map(d=>b(d.identifier)));return a.map((d,e)=>({role:mPd(d.role),nAn:c[e]}))};pPd=function(a){a=a.fc.rules.filter(b=>b.role>1&&b.role<6&&b.type===1);return oPd(a,b=>{var c,d;return`${(c=b.kb)===null||c===void 0?void 0:c.user}${(d=b.kb)===null||d===void 0?void 0:d.brand}`}).map(b=>{var c,d;return{role:mPd(b.role),userId:(c=b.kb)===null||c===void 0?void 0:c.user,X:(d=b.kb)===null||d===void 0?void 0:d.brand}})};
qPd=function(a){a=a.fc.rules.filter(b=>b.role>1&&b.role<6&&b.type===2);return oPd(a,b=>{var c;return __c.m((c=b.kb)===null||c===void 0?void 0:c.group,"Group ID must exist for a group")}).map(b=>{var c,d;return{role:mPd(b.role),groupId:(c=b.kb)===null||c===void 0?void 0:c.group,X:(d=b.kb)===null||d===void 0?void 0:d.brand}})};
rPd=function(a){const b=a.fc.rules.filter(c=>c.type===3||c.type===7&&c.role>1).map(c=>c.type===3?c:{...c,kb:new __c.Pi({brand:a.fc.$f.brand})});return oPd(b,c=>{var d;return __c.m((d=c.kb)===null||d===void 0?void 0:d.brand,"Brand ID must exist for a brand")}).map(c=>{var d,e;return{role:mPd(c.role),X:(d=c.kb)===null||d===void 0?void 0:d.brand,Qza:((e=c.kb)===null||e===void 0?0:e.brand)&&__c.XOd(a.fc,c.kb.brand)>1?"search_and_projects":"link_only"}}).filter(c=>c.role!=null)};
sPd=function(a){a=a.fc.rules.filter(b=>b.role>1&&b.role<6&&b.type===6);return oPd(a,b=>{var c;return __c.m((c=b.Tfa)===null||c===void 0?void 0:c.organization,"Org ID must exist for a org")}).map(b=>{var c;return{role:mPd(b.role),pp:(c=b.Tfa)===null||c===void 0?void 0:c.organization}})};tPd=function(a){if(a.Soa&&!a.uwa&&a.Uba===1)return{role:mPd(2),nac:!1};const b=a.fc.rules.find(c=>c.type===7&&c.role>1&&!c.HS);if(b)return{role:mPd(a.Uba),nac:b.nac}};
oPd=function(a,b){const c=new Map;a.forEach(d=>{const e=b(d),f=c.get(e);f?c.set(e,d.role>f.role?d:f):c.set(e,d)});return[...c.values()]};mPd=function(a){switch(a){case 6:case 5:return"edit";case 4:return"comment";case 3:case 2:return"view";case 1:break;default:throw new __c.t(a);}};uPd=H(()=>({type:z("A?",1,"CREATE"),intent:__c.Ma(2,__c.Sfb),label:M(5)}));vPd=H(()=>({type:z("A?",2,"REVOKE"),token:L(1)}));wPd=H(()=>({type:z("A?",4,"LABEL"),token:L(6),label:L(7)}));
xPd=H(()=>({type:z("A?",5,"UPDATE_ALLOW_LIST"),PCc:__c.Pa(8,__c.Sfb)}));yPd=__c.K(()=>[1,2,3]);zPd=H(()=>({type:z("A?",6,"UPDATE_USER_ALLOW_LIST"),action:__c.Ma(9,yPd),Rg:__c.gc(10)}));APd=H(()=>({type:z("A?",7,"REMOVE_ALLOW_LIST")}));BPd=H(()=>({type:z("A?",3,"REFRESH_LEGACY_SHARE_TOKEN")}));CPd=__c.Ta(()=>({type:[1,uPd,2,vPd,4,wPd,5,xPd,6,zPd,7,APd,3,BPd]}),()=>({}));DPd=__c.K(()=>[1,2]);EPd=H(()=>({DYc:L(1),domain:__c.Ma(2,DPd)}));
FPd=H(()=>({brand:L("brand",1),user:M("user",2),jb:E("entity",3,EPd)}));GPd=H(()=>({dHo:C(1,FPd),origin:C(2,__c.Qi),timestamp:__c.ec(4)}));HPd=H(()=>({expiry:__c.ec("expiry",1),xtp:L("serviceIdentity",2),origin:C("origin",3,__c.Qi),wHa:C("roleChange",4,__c.JOd),timestamp:__c.ec("timestamp",5)}));__c.IPd=H(()=>({identifier:L(2),display:M(6),Yue:__c.ic(7),role:__c.Ma(3,__c.ei)}));JPd=__c.K(()=>[1,2]);KPd=H(()=>({invitee:L(1)}));
__c.LPd=H(()=>({identifier:M(5),token:M(1),Vze:__c.Oa(2,JPd),xwf:__c.Oa(3,__c.IOd),yzr:E(6,KPd),role:__c.Oa(4,__c.ei)}));
MPd=__c.MPd=H(()=>({document:L("document",1),extension:M("extension",2),uXe:E("defaultRoleChange",3,__c.JOd),Gla:E("linkRoleChange",4,__c.KOd),erb:E("shareTokenChange",12,CPd),UPr:E("ownerChange",8,__c.LOd),WPr:E("ownershipChange",16,GPd),xpa:__c.La("principalRoleChanges",5,__c.LOd),o4r:__c.La("servicePrincipalRoleChanges",15,HPd),Kkc:__c.La("organizationPrincipalRoleChanges",14,__c.MOd),Moa:__c.La("invites",6,__c.IPd),Ehe:E("inviteChange",7,__c.LPd),NZr:__c.ic("removeTosRestriction",10),OPp:__c.Oa("tosRestriction",
11,__c.Vfb)}));NPd=H(()=>({id:L("id",1),body:C("body",4,MPd)}));__c.mgb.prototype.EFb=__c.ja(40,async function(a){__c.pa(a.id!=null&&/^D[a-zA-Z0-9_-]{10}$/.test(a.id));const b=__c.Kb(__c.Ib([__c.Qd,a.id,"acl"])),[c,{JCm:d}]=await Promise.all([this.ra.post(b,MPd.serialize(a.body),{Fa:"updatedocumentaclapi"}),__webpack_require__.me(904261).then(()=>({JCm:__c.xKc}))]);return d.deserialize(c)});__c.ogb.prototype.EFb=__c.ja(39,function(a){return this.P2.EFb(new NPd({id:a.document,body:a}))});
__c.OPd=class{static G(a){__c.Q(a,{fc:__c.QOd.ref,kRf:__c.QOd.ref,iua:OOd,oPc:OOd,ypc:OOd,ccj:OOd,Uba:__c.POd,uwa:__c.POd,lro:__c.POd,Soa:__c.POd,tga:OOd})}async iua({Kkc:a,xpa:b,Gla:c,uXe:d}){this.$qd({Kkc:a,xpa:b,Gla:c,uXe:d});try{const {fc:e}=await this.yb.EFb(new MPd({document:this.Pa,extension:this.fc.extension,Kkc:a,xpa:b,Gla:c,uXe:d}));ROd(()=>{this.tga(e)});gPd(this)}catch(e){throw this.sta(),e;}}async oPc(a,{lEr:b}={}){this.$qd({xpa:a});if(b)return this.sta();try{const {fc:c}=await this.yb.EFb(new MPd({document:this.Pa,
extension:this.fc.extension,xpa:a}));ROd(()=>{this.tga(c)});gPd(this)}catch(c){throw this.sta(),c;}}async ypc(a){this.$qd({Gla:a});try{const {fc:b}=await this.yb.EFb(new MPd({document:this.Pa,extension:this.fc.extension,Gla:a}));ROd(()=>{this.tga(b)});gPd(this)}catch(b){throw this.sta(),b;}}async ccj(a){this.$qd({Kkc:a});try{const {fc:b}=await this.yb.EFb(new MPd({document:this.Pa,extension:this.fc.extension,Kkc:a}));ROd(()=>{this.tga(b)});gPd(this)}catch(b){throw this.sta(),b;}}async Rbj(a,b){a=
new __c.LPd(b===1?{identifier:a,Vze:2}:{identifier:a,xwf:1,role:b});this.$qd({Ehe:a});try{const {fc:c}=await this.yb.EFb(new MPd({document:this.Pa,extension:this.fc.extension,Ehe:a}));ROd(()=>{this.tga(c)})}catch(c){throw this.sta(),c;}}async sta(){const {fc:a}=await this.yb.GAc(new __c.SOd({id:this.Pa,extension:this.fc.extension}));ROd(()=>{this.tga(a)});gPd(this)}$qd(a){const b=__c.fPd(this.fc,a);b!==this.fc&&ROd(()=>{this.fc=b})}get Vo(){return this.kRf}get Uba(){const a=this.fc.rules.find(b=>
b.type===7);return a?a.role:1}get uwa(){const a=this.fc.rules.find(b=>b.type===7);return a===null||a===void 0?void 0:a.HS}get lro(){var a;return(a=this.fc.UNg.find(b=>{var c;if(c=b.role===2)a:switch(b=b.intent,b){case 4:case 5:case 6:case 7:case 8:c=!1;break a;case 1:case 2:case 3:case void 0:c=!0;break a;default:throw new __c.t(b);}return c}))===null||a===void 0?void 0:a.token}get Soa(){return __c.EOd(this.fc)}tga(a){var b;this.fc=a;(b=this.GGd)===null||b===void 0||b.call(this,a)}jEa(a){a=a===this.fc.$f.brand;
return!!(this.Vo&&this.Vo>=5&&a)}constructor(a,b,c,d,e){this.yb=b;this.Pa=c;this.GGd=e;this.fc=(__c.OPd.G(this),void 0);this.fc=a;this.kRf=d}};PPd={eventType:"document_collaborate_failed",Ra(a){return Db({document_id:a.Pa,medium:a.medium,share_option:a.yja,doctype_id:a.Wa,editing_context:a.Ge==null?void 0:jh(a.Ge),page_doctype_ids:a.dA})}};
QPd={eventType:"document_collaborate_button_clicked",Ra(a){return Db({document_id:a.Pa,is_document_empty:a.$jo,doctype_id:a.Wa,location:a.location,editing_context:a.Ge==null?void 0:jh(a.Ge),page_doctype_ids:a.dA})}};kPd={eventType:"document_collaborate_input_added",Ra(a){return Db({document_id:a.Pa,editing_context:a.Ge==null?void 0:jh(a.Ge),has_restricted_sharing_capabilities:a.q2h,sharing_restrictions:a.kQd,bulk_emails:a.XVa,location:a.location})}};
RPd={eventType:"document_collaborate_suggested_recipient_interacted",Ra(a){return Db({doctype_id:a.Wa,suggestion_type:a.b5,suggestion_position_in_list:a.o2i,suggested_user_id:a.n2i,suggested_user_brand_id:a.m2i,suggested_group_id:a.e2i,suggested_email_hash:a.c2i,search_context:a.Mxa==null?void 0:hPd(a.Mxa),editing_context:a.Ge==null?void 0:jh(a.Ge),page_doctype_ids:a.dA})}};
SPd={eventType:"document_collaborate_suggested_recipient_seen",Ra(a){return Db({doctype_id:a.Wa,search_context:a.Mxa==null?void 0:hPd(a.Mxa),editing_context:a.Ge==null?void 0:jh(a.Ge),page_doctype_ids:a.dA})}};
TPd={eventType:"document_collaborate_completed",Ra(a){var b,c,d,e,f;return Db({location:a.location,brand_id:a.X,medium:a.medium,share_option:a.yja,document_id:a.Pa,doctype_id:a.Wa,candidate_type:a.candidateType,shared_user_id:a.fMc,shared_team_id:a.n7b,shared_group_id:a.pye,share_destination:a.N4r,shared_destination:a.V4r,shared_email_hash:a.TVi,email_list_length:a.KGh,was_message_added:a.X_p,message_length:a.Etg,is_design_owner:a.nfa,design_owner_user_id:a.mdc,share_correlation_id:a.Ewp,share_scope:a.jRb,
editing_context:a.Ge==null?void 0:jh(a.Ge),is_reshare:a.v1b,has_restricted_sharing_capabilities:a.q2h,sharing_restrictions:a.kQd,was_shared_silently:a.bFe,bulk_emails:a.XVa,shared_org_id:a.qye,is_brand_template:a.Dm,allowed_design_approval:a.$Qq,shared_invites:(b=a.Twp)===null||b===void 0?void 0:b.map(g=>Db({role:g.role,email_hash:g.nAn})),shared_users:(c=a.$wp)===null||c===void 0?void 0:c.map(g=>Db({role:g.role,user_id:g.userId,brand_id:g.X})),shared_groups:(d=a.Swp)===null||d===void 0?void 0:d.map(g=>
Db({role:g.role,group_id:g.groupId,brand_id:g.X})),shared_brands:(e=a.Rwp)===null||e===void 0?void 0:e.map(g=>Db({role:g.role,discoverable:g.Qza,brand_id:g.X})),shared_orgs:(f=a.Vwp)===null||f===void 0?void 0:f.map(g=>Db({role:g.role,org_id:g.pp})),public_access:a.B2k==null?void 0:iPd(a.B2k),page_doctype_ids:a.dA,has_domain_verification_enabled:a.Vlk})}};
UPd={eventType:"document_collaborate_share_setting_interacted",Ra(a){return Db({document_id:a.Pa,doctype_id:a.Wa,editing_context:a.Ge==null?void 0:jh(a.Ge),location:a.location,setting:a.bQd})}};__c.VPd={[1]:"private",[2]:"view",[3]:"view",[4]:"comment",[5]:"edit",[6]:"edit"};
__c.WPd=class{Gt(a,b,c){this.fa.track(QPd,{Pa:this.Pa,location:b,$jo:a,Wa:c,dA:void 0})}qya(a,b,c,d){this.fa.track(PPd,{Pa:this.Pa,medium:a,yja:b,Wa:d,dA:c})}async fqa({Pa:a,medium:b,location:c,yja:d,jRb:e,candidateType:f,fMc:g,pye:h,n7b:k,qye:l,TVi:n,KGh:p,Wa:q,dA:r,message:u,v1b:v,Vlk:w,bFe:x,XVa:y}){var A;const B=__c.Wa();this.fa.track(TPd,{Pa:a,Dm:(A=this.h3d)===null||A===void 0?void 0:A.Dm,medium:b,location:c,yja:d,jRb:e,candidateType:f,fMc:g,pye:h,n7b:k,qye:l,TVi:n,KGh:p,Wa:q,dA:r,X_p:!!u,Etg:u===
null||u===void 0?void 0:u.length,nfa:this.nfa,mdc:this.mdc,Ewp:B,v1b:v,Vlk:w,q2h:this.UH||this.xva,kQd:this.kQd.length?this.kQd:void 0,bFe:x,XVa:y,Twp:this.vl?await nPd(this.vl,this.XQa):void 0,$wp:this.vl?pPd(this.vl):void 0,Swp:this.vl?qPd(this.vl):void 0,Rwp:this.vl?rPd(this.vl):void 0,Vwp:this.vl?sPd(this.vl):void 0,B2k:this.vl?tPd(this.vl):void 0});jPd(this,B,b)}C8i({location:a,bQd:b}){this.fa.track(UPd,{Pa:this.Pa,location:a,bQd:b})}SRp({o2i:a,b5:b,Wa:c,dA:d,n2i:e,m2i:f,e2i:g,c2i:h,Md:k,Vca:l}){this.fa.track(RPd,
{o2i:a,b5:b,Wa:c,dA:d,n2i:e,m2i:f,e2i:g,c2i:h,Mxa:{Md:k,Vca:l}})}TRp(a,b,c,d){this.fa.track(SPd,{Wa:b,dA:a,Mxa:{Md:c,Vca:d}})}constructor({wa:a,vl:b,h3d:c,Pa:d,nfa:e,mdc:f,GD:g,UH:h,xva:k,KSj:l,XQa:n=__c.Vs}){this.fa=a;this.vl=b;this.h3d=c;this.Pa=d;this.nfa=e;this.mdc=f;this.UH=h;this.xva=k;this.GD=g;this.kQd=[...(this.UH?["disable_external_link_sharing"]:[]),...(this.xva?["disable_external_acl_sharing"]:[]),...(this.GD?["disable_discoverable_team_sharing"]:[])];this.KSj=l;this.XQa=n}};
}).call(self, self._ebd5e19490e9b70e7436d6c497657170);}

}])
//# sourceMappingURL=sourcemaps/e94a44b149674b02.js.map