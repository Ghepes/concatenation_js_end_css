;// __FILE_CONTENT_FOR__:450069d3b3239f91.js
(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[38477],{

/***/ 38618:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(157643);__web_req__(702912);self._ebd5e19490e9b70e7436d6c497657170 = self._ebd5e19490e9b70e7436d6c497657170 || {};(function(__c) {var yl;var xl;var sl;var Al;var c9a=__c.c9a;var E=__c.E;var H=__c.H;var PKb;var hIb;var bIb;var tKb;var HHb;var GHb;var hKb;var eKb;var dKb;var ZJb;var wHb;var Jl;var LJb;var JJb;var gl=__c.gl;var Q=__c.Q;var Cl;var Pl;var Ql;var Nl;var Rl;var cHb;var bHb;var Ml;var Wd=__c.Wd;var ZIb;var QIb;var Ll;var GIb;var HFb;var FIb;var il;var ea=__c.ea;var Kl;var lIb;var ra=__c.ra;var RHb;var Hl;var KHb;var ol;var qHb;var Dl;var zl;var Bl;var EGb;var dHb;var tl;var wl;var rl;var yGb;var pl;var m=__c.m;var ml;
var $Fb;var t=__c.t;var qa=__c.qa;var hl;var pa=__c.pa;var IFb,OFb,TFb,ll,VFb,XFb,ZFb,cGb,aGb,bGb,eGb,iGb,jGb,kGb,lGb,mGb,nGb,oGb,pGb,qGb,rGb,sGb,tGb,uGb,xGb,AGb,GGb,JGb,LGb,MGb,OGb,PGb,QGb,iHb,kHb,rHb,sHb,tHb,uHb,BHb,CHb,EHb,FHb,JHb,MHb,NHb,SHb,WHb,XHb,$Hb,aIb,eIb,fIb,iIb,jIb,kIb,nIb,oIb,pIb,qIb,rIb,sIb,tIb,uIb,vIb;
__c.GFb=function(a,b){pa(b.length>0);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;b>1;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};HFb=__c.HFb=function(a,b,c){pa(a.Qs(b,c),"{} != {}",b,c)};IFb=function(a,b){return new hl(b(a.VY),b(a.UZ),a.Ubc,a.enc)};
il=__c.il=function(a,b){return new hl(a,b,!1,!1)};__c.JFb=function(a){return new hl(void 0,a,!0,!1)};__c.jl=function(a,b){a.Ubc||(a.Ubc=b.Ubc);a.enc||(a.enc=b.enc);return b};__c.KFb=function(a,b=!0){a.Ubc||(a.Ubc=b)};__c.LFb=function(a,b=!0){a.enc||(a.enc=b)};__c.kl=function(a,b){a.xTh||(a.xTh=new MFb(a,a.$Mo,a.error));return new __c.NFb(a.xTh,b)};
OFb=function(a,b){qa(a.Kca!=null);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};__c.PFb=function(a,b,c,d){a=b.o$(a,c);b=b.connect(a,d);return{mutable:a,t6:b}};__c.SFb=function(a,b,c,d,e){return(e===null||e===void 0?0:e.s4j)?new QFb(a,b,c,d):new RFb(a,b,c,d)};TFb=function(a){a.cwg&&(a.cwg.reportChanged(),a.cwg=void 0)};
ll=function(a,b){return{Wj:a,PZ:b}};VFb=function(a){return a===1?UFb:{type:0,length:a}};XFb=function(a){return a===1?WFb:{type:1,length:a}};ZFb=function(a){return a===1?YFb:{type:2,length:a}};$Fb=__c.$Fb=function(a,b){return{type:3,state:a,shift:b}};ml=__c.ml=function(a,b){return{type:4,delta:a,shift:b}};
cGb=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${aGb(a.state)})${bGb(a.shift)}`;case 4:return`U(${aGb(a.delta)})${bGb(a.shift)}`;default:throw new t(a);}};aGb=function(a){return a!=null?a:"\u22a5"};bGb=function(a){return a!=null?`[${a.Wj},${a.PZ}]`:""};
eGb=function(a,b){return b&&a.NMd?new dGb(a.ops.map(c=>c.type===3&&c.shift?$Fb(c.state,ll(c.shift.Wj+b,c.shift.PZ+b)):c.type===4&&c.shift?ml(c.delta,ll(c.shift.Wj+b,c.shift.PZ+b)):c),a.pre,a.post,a.NMd):a};iGb=function(a,b){const c=m(a.iJ);if(c.type===0)return a.Hna(0,1),fGb;if(c.type===1)return a.Hna(1,1),gGb;if(c.type===2)return a.Hna(2,1),hGb;if(c.type!==b)throw Error();a.iJ=a.ops[a.i++];return c};jGb=function(a){return a.every(()=>!1)};
kGb=function(a,b){pa(b.length>0);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};lGb=function(a){pa(a.t0b<a.input.length,"{} >= {}",a.t0b,a.input.length);return a.input[a.t0b++]};mGb=function(a,b){b=a.t0b+b;pa(b<=a.input.length);const c=a.input.slice(a.t0b,b);a.t0b=b;return c};nGb=function(a,b){a.D2b||(a.D2b=new Set);pa(!a.D2b.has(b),"duplicate modification: {}",b);a.D2b.add(b)};oGb=function(a,b,c){nGb(a,b);(a.ZJi||(a.ZJi=new Map)).set(b,c)};
pGb=function(a,b,c){nGb(a,b);(a.YJi||(a.YJi=new Map)).set(b,c)};qGb=function(a,b){let {Wj:c,PZ:d}=b;var e=a.ZJi;a=a.YJi;if(e){const f=e.get(c);f!=null&&(c=f,e.delete(c))}a&&(e=a.get(d),e!=null&&(d=e,a.delete(d)));return c!==b.Wj||d!==b.PZ?ll(c,d):b};rGb=function(a,b,c){nGb(a,b);c!=null&&(a.BDe||(a.BDe=new Map)).set(b,c)};sGb=function(a,b,c){(a.uSd||(a.uSd=new Map)).set(b,c)};tGb=function(a,b,c){(a.YPd||(a.YPd=new Map)).set(c,b)};uGb=function({Wj:a,PZ:b}){return ll(b,a)};
__c.nl=function(a){return a.filter(()=>!0)};ol=__c.ol=function(a,b){pa(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};rl=__c.rl=function(a,b){return a===pl?b:b===pl?a:new vGb(a,b)};xGb=function(a,b){return new wGb(a,b)};yGb=__c.yGb=function(a,b){return b===pl?pl:new a(b)};AGb=function(a){return Object.keys(a).length===0?xGb({},{}):new zGb(a)};__c.CGb=function(a,b,c){return new BGb(a,b,c)};
EGb=__c.EGb=function(a,b){return b===void 0?yGb(DGb,a):new DGb(a,b)};sl=__c.sl=function(a,b){const c=new __c.FGb(d=>new a(d));return b!=null?rl(c,GGb(b)):c};GGb=function(a){var b=__c.HGb.structural;return{serialize:c=>b(c,a)?void 0:c,deserialize:c=>c!=null?c:a}};JGb=function(a){return rl(IGb,AGb({oldState:a,newState:a}))};__c.NGb=function(a,b,c,d){return __c.CGb({[0]:rl(rl(KGb,AGb({delta:a})),c),[1]:rl(JGb(b),d)},LGb,MGb)};LGb=function(a){return a.type};
MGb=function(a){switch(a.type){case "UPDATE":return 0;case "REPLACE":return 1;default:throw new t(a.type);}};OGb=function(a){const b=__c.Laa(c=>a(c));return c=>c!=null&&typeof c==="object"?b(c):a(c)};PGb=function(a,b){pa(a.zRa(b),"invalid value: {}",b);return b};QGb=function(a,b,c){if(!a.CF(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};
__c.SGb=function(a,b){var c=a.Sga,d=a.values;const e=new Map;for(const f of d)pa(!e.has(b[f]),"invalid literal mapping for: {}",f),e.set(b[f],f);return c.call(a,new RGb(b,e))};tl=__c.tl=function(a){return new TGb(a,pl)};__c.ul=function(...a){return a.length===1?new __c.UGb(new Set(a),xGb(a[0],a[0])):new __c.UGb(new Set(a),pl)};__c.vl=function(a,b){return new VGb(a,b,yGb(__c.WGb,a.serializer))};__c.ZGb=function(a,b){return new XGb(a,b,yGb(YGb,b.serializer))};
xl=__c.xl=function(a,b){return new $Gb(a,b,wl)};yl=__c.yl=function(a){return new aHb(a,pl)};bHb=__c.bHb=function(a,b){pa(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return tl(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};cHb=__c.cHb=function(a,b){pa(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return tl(c=>Number.isFinite(c)&&a<=c&&c<=b)};zl=__c.zl=function(a){return a instanceof dHb?new __c.eHb(a,EGb(a.serializer)):new fHb(a,EGb(a.Mza),EGb(a.JE))};
Al=__c.Al=function(a,b){return a.h_g(__c.CGb({[0]:xGb(),[1]:rl(JGb(a.type.serializer),b)},c=>c==null?0:c.type,c=>c==null?0:1))};Bl=__c.Bl=function(a){return new gHb(a,wl,a.serializer)};Cl=__c.Cl=function(a){return Bl(zl(a))};iHb=function(a,b,c){return c==null||a.component.isIdentity(c)?hHb:new Map([[b,c]])};__c.jHb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
kHb=function(a,b,c){const d=__c.kl(a,e=>a.domain.update(b,e));return __c.SFb(a.context,a.valueType,c,d)};__c.mHb=function(a,b,c,d){return a.h_g(rl(yGb(YGb,__c.NGb(EGb(a.valueType.Mza),EGb(a.valueType.JE),c,d)),rl(__c.lHb,b)))};__c.El=function(...a){const [b,c]=a.length===1?[Dl,a[0]]:a;return new nHb(b,c,wl,yGb(YGb,c.JE))};__c.pHb=function(a){return new oHb(a,pl,a.serializer)};rHb=function(a,b,c){return qHb.of({...a,...b,...c})};
sHb=function(...a){const b=new Set;for(const c of a)for(const d in c)pa(!b.has(d),'duplicate key: "{}"',d),b.add(d)};tHb=function(a){if(a.computed==null)return{Ve:{},attributes:{}};const {Ve:b,attributes:c,oaa:d}=a.computed.create({...a.values,...a.Ve,...a.attributes});return{Ve:ol(a.computed.Ve,(e,f)=>b[f]),attributes:ol(a.computed.attributes,(e,f)=>c[f]),oaa:d}};
uHb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Ve:{...a.Ve,...b.Ve},attributes:{...a.attributes,...b.attributes},create:e=>{const {Ve:f,attributes:g,oaa:h}=c(e),{Ve:k,attributes:l,oaa:n}=d({...e,...f,...g});return{Ve:{...f,...k},attributes:{...g,...l},oaa:h&&n?()=>{h();n()}:h||n}}}};__c.Fl=function(a){return vHb.Zt(a)};wHb=__c.wHb=function(a){return a.domain.Ln()};__c.Gl=function(a){return new __c.xHb(a,wl,rl(__c.yHb,new __c.zHb(yGb(__c.WGb,a.JE))))};
__c.AHb=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};BHb=function(a,b){a=a.length;pa(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};CHb=function(a,b){a=a.length;pa(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.DHb=function(a,b){return a?b?{Bd:__c.AHb(a.Bd,b.Bd),item:__c.AHb(a.item,b.item),Uz:__c.AHb(a.Uz,b.Uz)}:a:b};EHb=function(a,b){a=a.xOb;pa(0<b&&b<a,"{} \u2209 (0, {})",0,a)};FHb=function(a,b){a=a.eBb;pa(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
GHb=__c.GHb=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.oKa(b.state);default:throw new t(c);}case 2:switch(c.type){case 0:case 1:return a.$Oc(c.state);case 2:return a.kqb(b.state);default:throw new t(c);}default:throw new t(b);}};HHb=__c.HHb=function(a){const b=m(a.iJ);a.iJ=a.ops[a.i++];return b};__c.IHb=function(a,b){const c=m(a.iJ),d=c.xOb;pa(0<b&&b<=d);if(b<d){const [e,f]=c.NQg(b);a.iJ=f;return e}a.iJ=a.ops[a.i++];return c};
JHb=function(a,b){const c=m(a.iJ),d=c.eBb;pa(0<b&&b<=d);if(b<d){const [e,f]=c.MQg(b);a.iJ=f;return e}a.iJ=a.ops[a.i++];return c};MHb=function(a,b,c){switch(c.type){case 0:return b;case 1:return pa(b.type===1),new KHb(a.component.apply(b.state,c.delta));case 3:return __c.LHb(a,b,c.oldState),c.newState;default:throw new t(c);}};
NHb=function(a,b,c){switch(c.type){case 0:return b;case 1:return pa(b.type===1),new KHb(a.component.KH(b.state,c.delta));case 3:return __c.LHb(a,b,c.newState),c.oldState;default:throw new t(c);}};__c.OHb=function(a,b,c){switch(b.type){case 0:return c.type===0&&b.state===c.state;case 1:return c.type===1&&a.component.Qs(b.state,c.state);case 2:return c.type===2&&b.state===c.state;default:throw new t(b);}};__c.LHb=function(a,b,c){pa(__c.OHb(a,b,c),"{} != {}",b,c)};
__c.QHb=function(a,b){const c=__c.PHb.Ln(),d=a.cursor(0,{...Hl,Uz:g=>c.retain(g)}),e={...Hl,Bd:g=>c.retain(g.length)},f={...Hl,Bd:g=>c.oKa(g)};b.forEach({retain:g=>d.EL(g,e),delete:g=>d.EL(g,f),insert:g=>c.insert(g)});return c.build()};
SHb=function(a,b){const c=new RHb,d=a.cursor();a=h=>{throw Error(String(h));};const e={...Hl,Bd:h=>c.retain(h.length)},f={...Hl,Bd:a},g={...Hl,Bd:()=>0,Uz:a};b.forEach({retain:h=>d.pBa(h,e),update:h=>{throw new t(h);},insert:h=>h.type!==2&&c.insert(h.state),change:(h,k)=>{h.type===2?(d.pBa(h.length,f),k.type!==2&&c.insert(k.state)):(d.pBa(h.length,g),k.type===2?c.delete(h.length):(pa(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.THb=function(a){return Object.keys(a)};
__c.UHb=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.VHb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};WHb=function(a,b){return{type:0,nra:a,Ava:b}};XHb=function(a){return{type:1,length:a}};__c.YHb=function(a,b){return a&&b?a.Vta===b.Vta&&a.Vpa===b.Vpa:!a&&!b};__c.ZHb=function(a,b){Object.entries(a).forEach(([c,d])=>d!=null&&b(d,c))};
$Hb=function(a,b){const c=__c.THb(a),d=__c.THb(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.VHb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.YHb(a[f].r,b[f].r))};aIb=function(a,b={}){return{type:0,length:a,Wua:b}};bIb=__c.bIb=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
__c.cIb=function(a,b){let c=0,d=0;for(const e of a.sIb)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new t(e.type);}};eIb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new dIb(d,e):a};fIb=function(a,b,c){for(const [d,e]of a){const f=eIb(e,b,c);f!==e&&a.set(d,f)}};
hIb=__c.hIb=function(a,b,c,d){for(const [e,f]of a){const g=f.Web,h=f.Qeb,k=g&&(b!=null?eIb(g,b,d):g),l=h&&(c!=null?eIb(h,c,d):h);k===g&&l===h||a.set(e,new gIb(k,l))}};iIb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};jIb=function(a,b){ra(a,b);return a};kIb=function(a,b){return{key:a.PWc(b),value:b}};__c.Il=function(a,b,c){return new lIb(a,b,c,wl,wl)};__c.mIb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
nIb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};oIb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};pIb=function(a){return new RegExp(`^${a}${"B"}${"[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]"}{14}$`)};qIb=__webpack_require__(400770);rIb=qIb._isComputingDerivation;__c.HGb=qIb.comparer;Jl=__c.Jl=qIb.computed;sIb=qIb.createAtom;tIb=qIb.observable;
uIb=qIb.ObservableMap;vIb=qIb.onBecomeUnobserved;__c.wIb=__webpack_require__(450117).B7;__c.xIb=__webpack_require__(268245).p;var yIb=__webpack_require__(388909).t;__c.zIb=__webpack_require__(535921).T;__c.AIb=__webpack_require__(206928).iB;__c.BIb=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}};__c.CIb=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}};var EIb;Kl=__c.Kl=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new __c.DIb(this,a,b,c,d)}};
__c.DIb=class extends Kl{isIdentity(a){return this.component.isIdentity(this.w9a(a))}compose(a,b){return this.U5a(this.component.compose(this.w9a(a),this.w9a(b)))}transform(a,b){a=this.component.transform(this.w9a(a),this.w9a(b));return IFb(a,c=>this.U5a(c))}pD(a){return this.U5a(this.component.pD(this.w9a(a)))}identity(a){return this.U5a(this.component.identity(this.OSb(a)))}apply(a,b){const c=this.OSb(a);b=this.component.apply(c,this.w9a(b));return c===b?a:this.$Ec(b)}KH(a,b){const c=this.OSb(a);
b=this.component.KH(c,this.w9a(b));return c===b?a:this.$Ec(b)}Uw(a){return this.$Ec(this.component.Uw(this.OSb(a)))}Qs(a,b){return a===b||this.component.Qs(this.OSb(a),this.OSb(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.U5a=b;this.w9a=c;this.$Ec=d;this.OSb=e}};__c.DIb.prototype.Ix=ea(88);__c.DIb.prototype.xy=ea(73);hl=__c.hl=class{static builder(){return new EIb}constructor(a,b,c,d){this.VY=a;this.UZ=b;this.Ubc=c;this.enc=d}};
EIb=class{build(a,b){return new hl(a,b,this.Ubc,this.enc)}constructor(){this.enc=this.Ubc=!1}};FIb=__c.FIb=class extends Kl{isIdentity(){return!0}compose(){}transform(){return il()}pD(){}identity(){}apply(a){return a}KH(a){return a}Uw(a){return this.copy(a)}Qs(a,b){return this.CF(a,b)}equals(a){return this===a}constructor(a,b){super();this.CF=a;this.copy=b}};FIb.prototype.Ix=ea(87);FIb.prototype.xy=ea(72);GIb=__c.GIb=class extends Kl{update(a){return this.component.isIdentity(a)?void 0:new __c.BIb(a)}replace(a,b){return new __c.CIb(a,b)}isIdentity(a){return a==null||a.type===0&&this.component.isIdentity(a.delta)}compose(a,b){if(a==null)return b;if(b==null)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,b.delta));case 1:return this.replace(this.component.KH(b.oldState,a.delta),b.newState);default:throw new t(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,
this.component.apply(a.newState,b.delta));case 1:return HFb(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new t(b);}default:throw new t(a);}}transform(a,b){if(a==null||b==null)return il(b,a);switch(a.type){case 0:switch(b.type){case 0:return IFb(this.component.transform(a.delta,b.delta),c=>this.update(c));case 1:return a=this.component.apply(b.oldState,a.delta),new hl(this.replace(a,b.newState),void 0,!1,!0);default:throw new t(b);}case 1:switch(b.type){case 0:return b=
this.component.apply(a.oldState,b.delta),__c.JFb(this.replace(b,a.newState));case 1:return HFb(this.component,a.oldState,b.oldState),__c.JFb(this.replace(b.newState,a.newState));default:throw new t(b);}default:throw new t(a);}}pD(a){if(a==null)return a;switch(a.type){case 0:return this.update(this.component.pD(a.delta));case 1:return this.replace(a.newState,a.oldState);default:throw new t(a);}}identity(){}apply(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);
case 1:return HFb(this.component,a,b.oldState),b.newState;default:throw new t(b);}}KH(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.KH(a,b.delta);case 1:return HFb(this.component,a,b.newState),b.oldState;default:throw new t(b);}}Uw(a){return this.component.Uw(a)}Qs(a,b){return this.component.Qs(a,b)}equals(a){return this===a||a instanceof GIb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};GIb.prototype.Ix=ea(86);GIb.prototype.xy=ea(71);var IIb,JIb,MFb,LIb;__c.HIb={next:()=>{},error:()=>{}};IIb={next:a=>{throw Error(`unexpected message: ${a}`);},error:()=>{}};JIb=class{next(a){this.closed||this.o.next(this.f(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};__c.NFb=class extends JIb{error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){super(a,b);this.o=a;this.f=b}};__c.KIb=class extends JIb{complete(){this.closed||(this.closed=!0,this.o.complete())}constructor(a,b){super(a,b);this.o=a;this.f=b}};
MFb=class{next(a){this.onNext.call(this.QFf,a)}error(a){this.onError.call(this.QFf,a)}constructor(a,b,c){this.QFf=a;this.onNext=b;this.onError=c}};LIb=class{next(a){this.onNext.call(this.QFf,a)}complete(){this.onComplete.call(this.QFf)}constructor(a,b,c){this.QFf=a;this.onNext=b;this.onComplete=c}};Ll=__c.Ll=class{connect(a){qa(this.Kca==null);this.Kca=a;return new LIb(this,this.USo,this.complete)}USo(a){this.Kca&&this.Nwb(a)}snapshot(){return this.yab()}complete(){this.Kca&&(this.Kca=void 0,this.vof("mutable disconnected"))}error(a){this.Kca&&(this.Kca.error(a),this.Kca=void 0,this.vof("mutable failure"))}vof(a){if(this.clients){for(const b of this.clients.keys())try{b.error(a)}catch(c){}this.clients=void 0}}$Mo(a){this.Kca&&(this.Rdh&&this.Rdh.reportChanged(),OFb(this,a),this.Kca.next(a))}Nwb(a){qa(this.Kca!=
null,"mutable not connected");try{this.gsb(a),this.domain.isIdentity(a)||this.Rdh&&this.Rdh.reportChanged()}catch(b){throw this.error(b),b;}OFb(this,a)}IQ(a){var b;this.Nwb(a);this.domain.isIdentity(a)||(b=this.Kca)===null||b===void 0||b.next(a)}constructor(a){this.context=a;this.clients=this.xTh=this.Kca=void 0}};Ll.prototype.Mka=ea(97);var QFb=class{get mutable(){this.pC.pmk||(this.cwg=this.pC.dEp,this.pC=new MIb(this.context,this.type,this.pC.state,this));return this.pC.mutable}snapshot(){return this.pC.snapshot()}Nwb(a){TFb(this);this.pC.Nwb(a)}destroy(a){var b;this.pC.destroy(a);(b=this.context.metrics)===null||b===void 0||b.cDr.Pqn()}next(a){TFb(this);this.odg.next(a)}error(a){this.odg.error(a)}constructor(a,b,c,d){this.context=a;this.type=b;this.odg=d;this.cwg=void 0;this.pC=new NIb(b.domain,c)}},OIb=class{snapshot(){return this.type.snapshot(this.mutable)}Nwb(a){this.Pwl.next(a)}destroy(a){var b,
c=this.Pwl;this.type.destroy(this.mutable,a);c.complete();(b=this.metric())===null||b===void 0||b.Pqn()}constructor(a,b,c,d){this.context=a;this.type=b;this.odg=d;a=__c.PFb(a,this.type,c,this.odg);this.mutable=a.mutable;this.Pwl=a.t6;this.metric()}},RFb=class extends OIb{metric(){return this.context.metrics&&this.context.metrics.Y$q}},MIb=class extends OIb{metric(){return this.context.metrics&&this.context.metrics.dDr}constructor(...a){super(...a);this.pmk=!0}},NIb=class{snapshot(){this.B5||!rIb()?
this.B5&&this.B5.reportObserved():(this.B5=sIb(""),this.B5.reportObserved());return this.yrb}get state(){return this.yrb}get dEp(){return this.B5}Nwb(a){this.domain.isIdentity(a)||(this.yrb=this.domain.apply(this.yrb,a),this.B5&&this.B5.reportChanged())}destroy(a){HFb(this.domain,this.yrb,a)}constructor(a,b){this.domain=a;this.pmk=!1;this.B5=void 0;this.yrb=b}};__c.PIb=class{get(){this.reportObserved();return this.value}reportObserved(){this.B5||!rIb()?this.B5&&this.B5.reportObserved():(this.B5=sIb(""),this.B5.reportObserved(),vIb(this.B5,()=>this.B5=void 0))}set(a){__c.HGb.identity(this.value,a)||(this.value=a,this.B5&&this.B5.reportChanged())}constructor(a){this.value=a;this.B5=sIb("")}};QIb=__c.QIb=class extends Kl{isIdentity(a){return a==null||this.component.isIdentity(a)}compose(a,b){pa(a==null===(b==null));return a!=null&&b!=null?this.component.compose(a,b):void 0}transform(a,b){pa(a==null===(b==null));return a!=null&&b!=null?this.component.transform(a,b):il(b,a)}pD(a){return a!=null?this.component.pD(a):void 0}identity(a){return a!=null?this.component.identity(a):void 0}apply(a,b){pa(a==null===(b==null));return a!=null&&b!=null?this.component.apply(a,b):void 0}KH(a,b){pa(a==
null===(b==null));return a!=null&&b!=null?this.component.KH(a,b):void 0}Uw(a){return a!=null?this.component.Uw(a):void 0}Qs(a,b){return a===b||a!=null&&b!=null&&this.component.Qs(a,b)}equals(a){return this===a||a instanceof QIb&&this.component.equals(a.component)}constructor(a){super();this.component=a;pa(!(a instanceof QIb))}};QIb.prototype.Ix=ea(85);QIb.prototype.xy=ea(70);var UFb,WFb,YFb,gGb,fGb,hGb,dGb,RIb,SIb,TIb,UIb,VIb,WIb,XIb,YIb;UFb={type:0,length:1};WFb={type:1,length:1};YFb={type:2,length:1};gGb=$Fb();fGb=ml();hGb=ml(new __c.CIb);dGb=class{toString(){return this.ops.map(cGb).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.NMd=d}};RIb=new dGb([],0,0,0);
SIb=class{WRb(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(VFb(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(XFb(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(ZFb(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new t(this.mode);}this.mode=a}}accumulate(a,b=1){pa(b>=0,"{} < 0",b);b&&(this.WRb(a),this.acc+=b);return this}iGg({Wj:a,PZ:b}){const c=this.ops.length,
d=this.FMa||(this.FMa=new Map),e=this.Q8c||(this.Q8c=new Map);pa(!d.has(a),"duplicate record: {}",a);pa(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.kqb(a.length);case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.Wj===c.PZ&&(c=void 0,a=$Fb(b)),b==null&&c==null))return this.expand();this.WRb(a.type);c&&this.iGg(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=
a.delta,c&&c.Wj===c.PZ&&(c=void 0,a=ml(b)),b==null){if(c==null)return this.retain()}else if(b.type===1&&b.oldState==null&&b.newState==null&&c==null)return this.kqb();this.WRb(a.type);c&&this.iGg(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new t(a);}}retain(a){return a==null||typeof a==="number"?this.accumulate(0,a):this.append(ml(void 0,a))}expand(a){return a==null||typeof a==="number"?this.accumulate(1,a):this.append($Fb(void 0,a))}kqb(a){return a==null||typeof a==="number"?
this.accumulate(2,a):this.append(ml(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append($Fb(a,b))}update(a,b){return this.append(ml(a!=null?this.component.update(a):void 0,b))}$Oc(a){return this.append(ml(this.component.replace(void 0,a)))}oKa(a){return this.append(ml(this.component.replace(a,void 0)))}change(a,b,c){return this.append(ml(this.component.replace(a,b),c))}build(a){this.mode!==0&&this.WRb();if(a&&a.Shj())return a.yRh(this.ops);if(!this.FMa&&!this.Q8c)return new dGb(this.ops,
this.pre,this.post,0);a=this.ops;const b=m(this.FMa);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.Wj),f=g.get(d.PZ);if(e!==d.Wj||f!==d.PZ)a[h]=$Fb(c.state,ll(e,f));break;case 4:d=c.shift;e=g.get(d.Wj);f=g.get(d.PZ);if(e!==d.Wj||f!==d.PZ)a[h]=ml(c.delta,ll(e,f));break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${cGb(c)}`);default:throw new t(c);}}return new dGb(a,
this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.Q8c=this.FMa=this.mode=void 0}};
TIb=class{static create(a,b,c){pa(b>=0,"{} < 0",b);pa(c>=0,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,VFb(b)]:a.ops;return new TIb(a)}get head(){return this.iJ}Hna(a,b=1){const c=m(this.iJ);if(c.type!==a)throw Error();const d=c.length;pa(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.iJ=VFb(d-b),VFb(b);case 1:return this.iJ=XFb(d-b),XFb(b);case 2:return this.iJ=ZFb(d-b),ZFb(b);default:throw new t(a);}else return this.iJ=this.ops[this.i++],c}constructor(a){this.ops=
a;this.i=0;this.iJ=a[this.i++]}};
UIb=class{iGg(a,{Wj:b,PZ:c}){const d=this.FMa||(this.FMa=new Map),e=this.Q8c||(this.Q8c=new Map);qa(!d.has(b),"already recorded: {}",b);qa(!e.has(c),"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.iGg(a,b):a!=null&&(this.list[this.length]=a);this.length++;return this}expand(a=1){pa(a>=0,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.FMa||this.Q8c){const c=m(this.FMa);var b=m(this.Q8c);ra(c.size,b.size);for(const [d,e]of b)qa(c.has(d),"recall has no record: {}",
d),b=c.get(d),b!=null&&(a[e]=b)}this.U7j!=null&&ra(this.length,this.U7j);return a}constructor(a){this.U7j=a;this.list=[];this.length=0;this.Q8c=this.FMa=void 0}};VIb=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new VIb(a)}finish(){ra(this.t0b,this.input.length)}constructor(a){this.input=a;this.t0b=0}};
WIb=class{Shj(){return!!this.D2b}yRh(a){const b=new SIb(this.component);for(const c of a)switch(c.type){case 3:b.append(this.gbk(c));break;case 4:b.append(this.hbk(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new t(c);}return b.build()}constructor(a){this.component=a;this.YJi=this.ZJi=this.D2b=void 0}};
XIb=class extends WIb{gbk(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.BDe&&this.BDe.get(c.Wj);d=this.component.apply(b,d);const e=qGb(this,c);return d!==b||e!==c?$Fb(d,e):a}hbk(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.BDe&&this.BDe.get(c.Wj);d=this.component.compose(b,d);const e=qGb(this,c);return d!==b||e!==c?ml(d,e):a}constructor(...a){super(...a);this.BDe=void 0}};
YIb=class extends WIb{Shj(){return super.Shj()||!!this.YPd||!!this.uSd}gbk(a){if(!a.shift)return a;const b=a.shift,c=qGb(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}hbk(a){const b=a.delta,c=a.shift;var d=this.YPd;if(d){var e=d.get(a);if(e==null)e=a.delta;else{d.delete(a);d=m(this.uSd);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&qGb(this,c);return e!==b||d!==c?ml(e,d):a}yRh(a){a=super.yRh(a);if(this.YPd&&this.YPd.size)throw Error(`unconsumed setSurrogates: ${[...this.YPd.values()]}`);
if(this.uSd&&this.uSd.size)throw Error(`unconsumed subSurrogates: ${[...this.uSd.keys()]}`);return a}constructor(...a){super(...a);this.uSd=this.YPd=void 0}};
ZIb=__c.ZIb=class extends Kl{Ln(){return new SIb(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new t(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.Ln(),e=new XIb(c),f=TIb.create(a,0,b.pre),g=TIb.create(eGb(b,a.NMd),a.post,0);for(var h=f.head,k=g.head;h||k;){if(k)if(k.type===1)d.append(g.Hna(k.type,k.length));
else if(k.type===3)d.append(iGb(g,k.type));else if(h)if(h.type===1)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.Hna(h.type,l);g.Hna(k.type,l);d.append(XFb(l));break;case 4:l=iGb(f,h.type);k=iGb(g,k.type);h=k.shift;d.append($Fb(c.apply(l.state,k.delta),h));break;default:throw new t(k);}else if(h.type===3){l=iGb(f,h.type);k=iGb(g,k.type);h=l.shift;var n=k.shift;h==null?d.append($Fb(c.apply(l.state,k.delta),n)):n==null?(d.append(l),rGb(e,h.PZ,k.delta)):(d.append($Fb(l.state,ll(h.Wj,
n.PZ))),rGb(e,h.PZ,k.delta),pGb(e,n.Wj,h.PZ))}else h.type===4||k.type===4?(k=iGb(f,4),l=iGb(g,4),h=k.shift,n=l.shift,h==null?d.append(ml(c.compose(k.delta,l.delta),n)):n==null?(d.append(k),rGb(e,h.PZ,l.delta)):(d.append(ml(k.delta,ll(h.Wj,n.PZ))),rGb(e,h.PZ,l.delta),pGb(e,n.Wj,h.PZ))):(l=Math.min(h.length,k.length),h=f.Hna(h.type,l),k=g.Hna(k.type,l),d.append(h.type===2||k.type===2?ZFb(l):VFb(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);h=
f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return il(b,a);const c=this.component,d=TIb.create(a,b.pre,0),e=TIb.create(eGb(b,a.NMd),a.pre,0),f=this.Ln(),g=this.Ln(),h=hl.builder(),k=new YIb(c),l=new YIb(c);for(var n=d.head,p=e.head;n||p;){if(n&&n.type===3)if(p=iGb(d,n.type),p.shift){var q=p.shift;n=ml();g.append(n,"nocollapse");f.append(p);tGb(k,q.PZ,n);sGb(k,q.Wj)}else g.append(UFb),f.append(p);else if(n&&n.type===1)p=d.Hna(n.type,n.length),g.append(VFb(p.length)),
f.append(p);else if(p&&p.type===3)if(p=iGb(e,p.type),p.shift){n=p.shift;q=n.Wj;n=n.PZ;var r=-q-1,u=ml(void 0,ll(-n-1,n));g.append(p);f.append(u);tGb(l,n,u);sGb(l,q);oGb(l,r,q)}else g.append(p),f.append(UFb);else if(p&&p.type===1)q=e.Hna(p.type,p.length),g.append(q),f.append(VFb(p.length));else if(n&&p)if(n.type===4||p.type===4){q=iGb(d,n.type);n=iGb(e,p.type);const {VY:v,UZ:w}=__c.jl(h,c.transform(q.delta,n.delta));p=q.shift;n=n.shift;if(p)if(n){q=n.Wj;n=n.PZ;r=p.Wj;p=p.PZ;u=-q-1;const x=ml(void 0,
ll(-n-1,n)),y=ml(void 0,ll(q,n));g.append(y);f.append(x);tGb(k,p,y);tGb(l,n,x);sGb(k,r,v);sGb(l,q,w);oGb(l,u,r);pGb(l,q,p)}else q=p.Wj,n=p.PZ,r=ml(),g.append(r,"nocollapse"),f.append(ml(w,p)),tGb(k,n,r),sGb(k,q,v);else n?(p=n.Wj,q=n.PZ,r=-p-1,u=ml(void 0,ll(-q-1,q)),g.append(ml(v,n)),f.append(u),tGb(l,q,u),sGb(l,p,w),oGb(l,r,p)):(g.append(ml(v)),f.append(ml(w)))}else q=Math.min(n.length,p.length),n=d.Hna(n.type,q),p=e.Hna(p.type,q),n.type===2&&p.type===2?g.append(VFb(p.length)):g.append(p),f.append(n);
else throw Error(`length mismatch (${a} x ${b})`);n=d.head;p=e.head}return h.build(g.build(k),f.build(l))}pD(a){if(!a.ops.length)return a;const b=this.Ln(),c=new XIb(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.pD(d.delta);const e=d.shift&&uGb(d.shift);e?(b.retain(e),rGb(c,e.PZ,a)):b.append(ml(a));break;case 3:a=d.shift&&uGb(d.shift);d.state!=null?a?(b.retain(a),rGb(c,a.PZ,this.component.replace(d.state,void 0))):b.oKa(d.state):
b.retain(a);break;default:throw new t(d);}return b.build(c)}Kk(a){return new UIb(a)}identity(){return RIb}apply(a,b){if(!b.ops.length)return a;const c=VIb.create(a,b.pre),d=new UIb(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,VFb(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:kGb(d,mGb(c,e.length));break;case 1:d.expand(e.length);break;case 2:qa(jGb(mGb(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(lGb(c),
e.delta),e.shift);break;default:throw new t(e);}c.finish();return d.build()}KH(a,b){if(!b.ops.length)return a;const {unshift:c,GUp:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=VIb.create(a,b.post),f=new UIb(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,VFb(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:kGb(f,mGb(e,g.length));break;case 1:qa(jGb(mGb(e,g.length)));break;case 2:qa(jGb(mGb(e,g.length)));f.expand(g.length);break;case 3:HFb(this.component,g.state,
lGb(e));break;case 4:f.append(this.component.KH(lGb(e),g.delta));break;default:throw new t(g);}e.finish();return f.build()}unshift(a){const b=this.Ln(),c=this.Ln();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(VFb(d.length));c.append(d);break;case 4:d.shift?(b.retain(uGb(d.shift)),c.append(ml(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(uGb(d.shift)),c.append($Fb(d.state))):(b.retain(),c.append(d));break;default:throw new t(d);
}return{unshift:b.build(),GUp:c.build()}}Uw(a){const b=[];a.forEach((c,d)=>{c=this.component.Uw(c);c!=null&&(b[d]=c)});return Object.freeze(b)}Qs(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.Qs(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof ZIb&&this.component.equals(a.component)}constructor(a){super();this.component=new GIb(new QIb(a))}};
ZIb.prototype.ipf=ea(99);ZIb.prototype.Ix=ea(84);ZIb.prototype.xy=ea(69);var vGb,wGb,RGb,YGb,zGb,BGb,DGb,KGb,IGb;pl=__c.pl=Object.freeze({serialize:a=>a,deserialize:a=>a});wl=__c.wl=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});vGb=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
wGb=class{serialize(){return this.to}deserialize(){return this.from}constructor(a,b){this.from=a;this.to=b}};RGb=class{serialize(a){return this.qtp[a]}deserialize(a){return this.qsn.get(a)}constructor(a,b){this.qtp=a;this.qsn=b}};__c.WGb=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
__c.yHb=Object.freeze({serialize(a){let b=0,c=0;const d=__c.nl(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return[d,e]},deserialize([a,b]){const c=[];let d=0;for(const e of b)e<0?d+=-e:e>0&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});YGb=class{serialize(a){return Wd(a,b=>this.serializer.serialize(b))}deserialize(a){return Wd(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
__c.zHb=class{serialize([a,b]){return[this.Fdl.serialize(a),this.Gdl.serialize(b)]}deserialize([a,b]){return[this.Fdl.deserialize(a),this.Gdl.deserialize(b)]}constructor(a){this.Fdl=a;this.Gdl=__c.pl}};zGb=class{serialize(a){return ol(this.T9j,(b,c)=>b.serialize(a[c]))}deserialize(a){return ol(this.T9j,(b,c)=>b.deserialize(a[c]))}constructor(a){this.T9j=a}};
BGb=class{serialize(a){return this.l1[this.Kvn(a)].serialize(a)}deserialize(a){return this.l1[this.Jvn(a)].deserialize(a)}constructor(a,b,c){this.l1=a;this.Kvn=b;this.Jvn=c}};DGb=class{serialize(a){return a!=null?this.serializer.serialize(a):this.defaultValue}deserialize(a){return a!==this.defaultValue?this.serializer.deserialize(a):void 0}constructor(a,b){this.serializer=a;this.defaultValue=b}};
__c.FGb=class{serialize(a){return this.construct(a)}deserialize(a){return a}constructor(a){this.construct=a}};KGb=Object.freeze({serialize:a=>a,deserialize:a=>new __c.BIb(a.delta)});IGb=Object.freeze({serialize:a=>a,deserialize:a=>new __c.CIb(a.oldState,a.newState)});__c.lHb=Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var $Ib=Symbol();__c.aJb=class{create(a,b=yIb,c=__c.HIb){a=this.o$({[$Ib]:$Ib,metrics:{}.metrics},a);b.subscribe(this.connect(a,c));return a}V2a(a){return this.create(a,yIb,IIb)}Uw(a){return this.domain.Uw(a)}};__c.aJb.prototype.Mka=ea(96);Ml=__c.Ml=class extends __c.aJb{h_g(a){return this.K9(a,this.JE)}map(a,b,c,d,e,f){c=OGb(c);d=OGb(d);return new __c.bJb(this,a,b,c,d,e,f,rl({serialize:b,deserialize:a},this.Mza),rl({serialize:d,deserialize:c},this.JE))}constructor(a,b){super();this.Mza=a;this.JE=b}};
Ml.prototype.Tga=ea(103);
__c.bJb=class extends Ml{o$(a,b){return this.FEk(this.component.o$(a,this.OSb(b)))}connect(a,b){b=new __c.NFb(b,this.U5a);a=this.component.connect(this.UCe(a),b);return new __c.KIb(a,this.w9a)}snapshot(a){return this.$Ec(this.component.snapshot(this.UCe(a)))}destroy(a,b){return this.component.destroy(this.UCe(a),this.OSb(b))}mz(a,b){return this.component.mz(this.UCe(a),this.OSb(b))}K9(a,b){return new __c.bJb(this.component,this.U5a,this.w9a,this.$Ec,this.OSb,this.FEk,this.UCe,a,b)}constructor(a,b,
c,d,e,f,g,h,k){super(h,k);this.component=a;this.U5a=b;this.w9a=c;this.$Ec=d;this.OSb=e;this.FEk=f;this.UCe=g;this.domain=this.component.domain.map(this.U5a,this.w9a,this.$Ec,this.OSb)}};__c.bJb.prototype.Mka=ea(95);var cJb,TGb,VGb,XGb,dJb,$Gb,aHb,gJb,jJb,kJb,lJb;dHb=__c.dHb=class{constructor(a){this.serializer=a}};dHb.prototype.Tga=ea(102);cJb=class extends dHb{CF(a,b){return a===b}Uw(a){return a}stringify(a){return JSON.stringify(a)}};__c.UGb=class extends cJb{zRa(a){return this.values.has(a)}Sga(a){return new __c.UGb(this.values,a)}constructor(a,b){super(b);this.values=a}};__c.UGb.prototype.Tga=ea(101);TGb=class extends cJb{Sga(a){return new TGb(this.zRa,a)}constructor(a,b){super(b);this.zRa=a}};
VGb=class extends dHb{zRa(a){return a.every(b=>this.type.zRa(b))&&(!this.Jid||this.Jid(a))}CF(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.CF(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}Uw(a){return Object.freeze(a.map(b=>this.type.Uw(b)))}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}Sga(a){return new VGb(this.type,this.Jid,a)}constructor(a,b,c){super(c);this.type=a;this.Jid=b}};
XGb=class extends dHb{zRa(a){return[...a].every(this.qko)}CF(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),a==null||!this.valueType.CF(d,a))return!1;return!0}Uw(a){const b=new Map;for(const [c,d]of a)b.set(c,this.valueType.Uw(d));return b}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}Sga(a){return new XGb(this.keyType,this.valueType,a)}constructor(a,b,c){super(c);this.keyType=a;this.valueType=
b;this.qko=([d,e])=>dJb.every(f=>!d.includes(f))&&this.keyType.zRa(d)&&this.valueType.zRa(e)}};dJb=["$",".","\x00"];
$Gb=class extends dHb{zRa(a){return this.keys.every(b=>this.fields[b].zRa(a[b]))&&(!this.Jid||this.Jid(a))}CF(a,b){return this.keys.every(c=>this.fields[c].CF(a[c],b[c]))}Uw(a){return Object.freeze(ol(this.fields,(b,c)=>b.Uw(a[c])))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}Sga(a){return new $Gb(this.fields,this.Jid,a)}pf(a){var b=ol(this.fields,c=>c.serializer);b=AGb(b);return this.Sga(rl(b,a))}constructor(a,b,c){super(c);
this.fields=a;this.Jid=b;this.keys=Object.keys(this.fields)}};__c.eHb=class extends dHb{zRa(a){return a==null||this.type.zRa(a)}CF(a,b){return a!=null?b!=null&&this.type.CF(a,b):b==null}Uw(a){return a!=null?this.type.Uw(a):void 0}stringify(a){return a!=null?this.type.stringify(a):"undefined"}Sga(a){return new __c.eHb(this.type,a)}constructor(a,b){super(b);this.type=a}};
aHb=class extends cJb{zRa(a){return typeof a==="string"&&this.regexp.test(a)}Sga(a){return new aHb(this.regexp,a)}constructor(a,b){super(b);this.regexp=a}};Nl=__c.Nl=tl(a=>typeof a==="boolean");Dl=__c.Dl=tl(a=>typeof a==="string");__c.eJb=tl(a=>a.length===1);__c.fJb=bHb(-2147483648,2147483647);gJb=tl(a=>Number.isSafeInteger(a));Pl=__c.Pl=bHb(0,2147483647);__c.hJb=bHb(1,2147483647);__c.iJb=bHb(0,Number.MAX_SAFE_INTEGER);Ql=__c.Ql=tl(a=>Number.isFinite(a));Rl=__c.Rl=cHb(0,Number.MAX_VALUE);
jJb=tl(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);kJb=__c.vl(Rl);lJb=__c.vl(Dl);var mJb,fHb;mJb={next:a=>pa(a==null),complete:()=>{}};
fHb=class extends Ml{o$(a,b){return b!=null?this.type.o$(a,b):void 0}connect(a,b){if(a==null)return mJb;a=this.type.connect(a,b);return new __c.KIb(a,m)}snapshot(a){return a!=null?this.type.snapshot(a):void 0}destroy(a,b){if(a!=null&&b!=null)this.type.destroy(a,b);else if(a!=null||b!=null)throw Error(`${this.snapshot(a)} != ${b}`);}mz(a,b){return a!=null?b!=null&&this.type.mz(a,b):b==null}K9(a,b){return new fHb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new QIb(this.type.domain)}};
__c.nJb=zl(Dl);__c.oJb=zl(Nl);zl(__c.fJb);zl(gJb);__c.pJb=zl(Ql);__c.qJb=zl(Pl);__c.rJb=zl(__c.iJb);__c.sJb=zl(Rl);var tJb,gHb;tJb=class extends Ll{gsb(a){if(a!=null)switch(a.type){case 1:pa(this.WGl.CF(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:pa(a.delta==null);break;default:throw new t(a);}}get value(){return this._value.get()}set value(a){PGb(this.WGl,a);const b=this._value.get();this.IQ(this.domain.replace(b,a))}yab(){return this.value}constructor(a,b,c,d){super(a);this.WGl=b;this.domain=c;this._value=new __c.PIb(d)}};
gHb=class extends Ml{o$(a,b){b=PGb(this.type,b);return new tJb(a,this.type,this.domain,b)}connect(a,b){return a.connect(b)}snapshot(a){return a.snapshot()}destroy(a,b){QGb(this.type,a.value,b)}mz(a,b){this.type.CF(a.value,b)||(a.value=b);return!0}K9(a,b){return new gHb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new GIb(new FIb((d,e)=>this.type.CF(d,e),d=>this.type.Uw(d)))}};__c.uJb=Bl(Dl);__c.vJb=Bl(Nl);__c.wJb=Bl(Ql);__c.xJb=Bl(__c.iJb);__c.yJb=Bl(Rl);__c.zJb=Bl(jJb);
__c.AJb=Bl(kJb);__c.BJb=Bl(lJb);__c.Sl=Cl(Dl);Cl(Nl);Cl(Ql);__c.CJb=Cl(Pl);Cl(__c.iJb);__c.DJb=Cl(Rl);var hHb;hHb=new Map;
__c.EJb=class extends Kl{create(a,b){return iHb(this,a,this.component.replace(void 0,b))}update(a,b){return iHb(this,a,this.component.update(b))}replace(a,b,c){return iHb(this,a,this.component.replace(b,c))}delete(a,b){return iHb(this,a,this.component.replace(b,void 0))}identity(){return hHb}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}pD(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.pD(d),a!=null&&b.set(c,a);return b}compose(a,
b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of __c.jHb(a,b)){const e=this.component.compose(a.get(d),b.get(d));e!=null&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return il(b,a);const c=new Map,d=new Map,e=hl.builder();for(const f of __c.jHb(a,b)){const g=__c.jl(e,this.component.transform(a.get(f),b.get(f)));g.UZ!=null&&c.set(f,g.UZ);g.VY!=null&&d.set(f,g.VY)}return e.build(d,c)}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),
d);d!=null?c.set(e,d):c.delete(e)});return c}KH(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.KH(a.get(e),d);d!=null?c.set(e,d):c.delete(e)});return c}Uw(a){const b=new Map;for(const [c,d]of a)a=this.component.Uw(d),a!=null&&b.set(c,a);return b}Qs(a,b){return a===b||a.size===b.size&&Array.from(__c.jHb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.Qs(d,c)})}equals(a){return this===a||a instanceof __c.EJb&&this.component.equals(a)}constructor(a){super();
this.component=new GIb(new QIb(a))}};__c.EJb.prototype.Ix=ea(83);__c.EJb.prototype.xy=ea(68);var FJb;FJb=Symbol.iterator;
var GJb=class extends Ll{static G(a){Q(a,{Tka:tIb.shallow})}get size(){return this.Tka.size}set(a,b){PGb(this.keyType,a);var c=this.Tka.get(a);c=c!=null?this.domain.replace(a,c.snapshot(),b):this.domain.create(a,b);this.IQ(c);c=this.Tka.get(a);if(c==null)throw Error(`Unable to set key "${a}" to value "${b}"`);return c.mutable}get(a){var b;return(b=this.Tka.get(a))===null||b===void 0?void 0:b.mutable}has(a){return this.Tka.has(a)}delete(a){const b=this.Tka.get(a);b!=null&&(a=this.domain.delete(a,b.snapshot()),
this.IQ(a))}forEach(a){this.Tka.forEach((b,c)=>a(b.mutable,c))}map(a){return[...this.Tka].map(([b,c])=>a(c.mutable,b))}every(a){return[...this.Tka.entries()].every(([b,c])=>a(c.mutable,b))}*entries(){for(const [a,b]of this.Tka)yield[a,b.mutable]}keys(){return this.Tka.keys()}*values(){for(const a of this.Tka.values())yield a.mutable}e5(){return Wd(this.Tka,a=>a.mutable)}[FJb](){return this.e5()[Symbol.iterator]()}yab(){return Wd(this.Tka,a=>a.snapshot())}destroy(a){pa(this.Tka.size===a.size);this.forEach((b,
c)=>{b=m(a.get(c));m(this.Tka.get(c)).destroy(b)})}mz(a){for(const [b,c]of this.Tka)if(a.has(b)){const d=a.get(b);this.valueType.mz(c.mutable,d)||this.set(b,d)}else this.delete(b);for(const [b,c]of a)this.Tka.has(b)||this.set(b,c);return!0}gsb(a){a.forEach((b,c)=>{if(b!=null)switch(b.type){case 0:b.delta!=null&&m(this.Tka.get(c)).Nwb(b.delta);break;case 1:if(b.oldState!=null){var d=b.oldState;m(this.Tka.get(c)).destroy(d);this.Tka.delete(c)}else pa(!this.Tka.has(c));b.newState!=null&&this.Tka.set(c,
kHb(this,c,b.newState));break;default:throw new t(b);}})}constructor(a,b,c,d,e){super(a);this.keyType=b;this.valueType=c;this.domain=d;this.Tka=(GJb.G(this),new Map);e.forEach((f,g)=>{PGb(this.keyType,g);this.Tka.set(g,kHb(this,g,f))})}},nHb=class extends Ml{o$(a,b){return new GJb(a,this.keyType,this.valueType,this.domain,b)}mJ(a){return a}connect(a,b){return this.mJ(a).connect(b)}snapshot(a){return this.mJ(a).snapshot()}destroy(a,b){return this.mJ(a).destroy(b)}mz(a,b){return this.mJ(a).mz(b)}h_g(a){return new nHb(this.keyType,
this.valueType,a,this.JE)}K9(a,b){return new nHb(this.keyType,this.valueType,a,b)}constructor(a,b,c,d){super(c,d);this.keyType=a;this.valueType=b;this.domain=new __c.EJb(this.valueType.domain)}};var HJb={next:()=>{},complete:()=>{}},oHb=class extends Ml{o$(a,b){return PGb(this.type,b)}connect(){return HJb}snapshot(a){return a}destroy(a,b){QGb(this.type,a,b)}mz(a,b){return this.type.CF(a,b)}K9(a,b){return new oHb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new FIb((d,e)=>this.type.CF(d,e),d=>this.type.Uw(d))}};qHb=__c.qHb=class extends Kl{static of(a){return new qHb(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>c==null||this.components[b].isIdentity(c))}pD(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];d!=null&&(c=this.components[e],d=c.pD(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);
if(!d.length)return b;if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];e!=null&&g!=null?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):e!=null?c[f]=e:g!=null&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return il(b,a);const g=hl.builder();for(const h of new Set([...e,...f])){f=a[h];const k=b[h];f!=null&&k!=null?(e=this.components[h],f=__c.jl(g,e.transform(f,k)),e.isIdentity(f.UZ)||(c[h]=
f.UZ),e.isIdentity(f.VY)||(d[h]=f.VY)):f!=null?c[h]=f:k!=null&&(d[h]=k)}return g.build(d,c)}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d={...a};for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].apply(a[e],c));return d}KH(a,b){var c=Object.keys(b);if(!c.length)return a;const d={...a};for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].KH(a[e],c));return d}Uw(a){return Object.freeze(gl(this.components,(b,c)=>b.Uw(a[c])))}Qs(a,b){return a===b||Object.keys(this.components).every(c=>
this.components[c].Qs(a[c],b[c]))}equals(a){return this===a?!0:a instanceof qHb?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};qHb.prototype.Ix=ea(82);qHb.prototype.xy=ea(67);var KJb;
__c.IJb=class extends Ll{yab(){const a=this.nTb,b=this.duf,c=this.G1d,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=this.Ve[e].snapshot();for(const e in c)d[e]=this.attributes[e].snapshot();return d}destroy(a){const b=this.nTb,c=this.duf,d=this.G1d,e=this.mcc;for(const f in b)QGb(b[f],this.values[f],a[f]);for(const f in c)this.Ve[f].destroy(a[f]);for(const f in d)this.attributes[f].destroy(a[f]);if(e&&e.oaa)try{e.oaa()}catch(f){Promise.reject(f)}}mz(a){const b=this.nTb,c=this.duf,
d=this.G1d;for(const e in b)if(!b[e].CF(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].mz(this.Ve[e].mutable,a[e]))return!1;for(const e in d)if(!d[e].mz(this.attributes[e].mutable,a[e]))return!1;return!0}gsb(a){for(const b in a)a[b]!=null&&(b in this.duf?this.Ve[b].Nwb(a[b]):b in this.G1d&&this.attributes[b].Nwb(a[b]))}getAttribute(a){return this.attributes[a].snapshot()}setAttribute(a,b){this.attributes[a].mutable.value=b}constructor(a,b,c,d,e,f,g,h,k){super(a);this.domain=b;this.nTb=c;
this.duf=d;this.G1d=e;this.computed=f;this.sIi=g;this.cjh=h;this.mcc=void 0;this.values=ol(c,(l,n)=>PGb(l,k[n]));this.Ve=ol(d,(l,n)=>__c.SFb(this.context,l,k[n],__c.kl(this,this.sIi[n]),{s4j:!1}));this.attributes=ol(e,(l,n)=>__c.SFb(this.context,l,k[n],__c.kl(this,this.cjh[n]),{s4j:!1}))}};__c.IJb.prototype.GSa=ea(105);JJb=__c.JJb=Symbol("$impl");KJb=class extends Ml{};
LJb=__c.LJb=class extends KJb{o$(a,b){a=new __c.IJb(a,this.domain,this.values,this.Ve,this.attributes,this.computed,this.sIi,this.cjh,b);b={...a.values};Object.defineProperties(b,this.Ecp);Object.defineProperty(b,JJb,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[JJb].connect(b)}snapshot(a){return a[JJb].snapshot()}destroy(a,b){a[JJb].destroy(b)}mz(a,b){return a[JJb].mz(b)}K9(a,b){return new LJb(this.values,this.Ve,this.attributes,this.computed,a,b)}pf(a,b){const c=AGb({...ol(this.Ve,
e=>e.Mza),...ol(this.attributes,e=>e.Mza)}),d=AGb({...ol(this.values,e=>e.serializer),...ol(this.Ve,e=>e.JE),...ol(this.attributes,e=>e.JE)});return this.K9(rl(c,a),rl(d,b))}Zt({values:a={},Ve:b={},attributes:c={},computed:d}){return new LJb({...this.values,...a},{...this.Ve,...b},{...this.attributes,...c},uHb(this.computed,d),wl,wl)}constructor(a,b,c,d,e,f){super(e,f);this.values=a;this.Ve=b;this.attributes=c;this.computed=d;this.domain=rHb(ol(this.values,g=>new FIb((h,k)=>g.CF(h,k),h=>g.Uw(h))),
ol(this.Ve,g=>g.domain),ol(this.attributes,g=>g.domain));this.sIi=ol(this.Ve,(g,h)=>k=>({[h]:k}));this.cjh=ol(this.attributes,(g,h)=>k=>({[h]:k}));sHb(a,{...b,...(d===null||d===void 0?void 0:d.Ve)},{...c,...(d===null||d===void 0?void 0:d.attributes)});a=ol(b,(g,h)=>({enumerable:!0,configurable:!0,get(){return this[JJb].Ve[h].mutable}}));c=ol(c,(g,h)=>({enumerable:!0,configurable:!0,get(){return this[JJb].getAttribute(h)},set(k){this[JJb].setAttribute(h,k)}}));b=ol((d===null||d===void 0?void 0:d.Ve)||
{},(g,h)=>({enumerable:!0,configurable:!0,get(){var k=this[JJb];k.mcc==null&&(k.mcc=tHb(k));return k.mcc.Ve[h]}}));d=ol((d===null||d===void 0?void 0:d.attributes)||{},(g,h)=>({enumerable:!0,configurable:!0,get(){var k=this[JJb];k.mcc==null&&(k.mcc=tHb(k));return k.mcc.attributes[h].value},set(k){var l=this[JJb];l.mcc==null&&(l.mcc=tHb(l));l.mcc.attributes[h].value=k}}));this.Ecp={...a,...b,...c,...d}}};LJb.prototype.GSa=ea(104);LJb.prototype.Mka=ea(94);var vHb=new LJb({},{},{},void 0,wl,wl);__c.MJb=class extends Kl{increment(a){return a}isIdentity(a){return a===0}compose(a,b){return a+b}transform(a,b){return il(b,a)}identity(){return 0}apply(a,b){return a+b}KH(a,b){return a-b}Uw(a){return a}Qs(a,b){return a===b}};__c.MJb.prototype.Ix=ea(81);__c.NJb=class extends __c.MJb{pD(a){return 0-a}equals(a){return this===a||a instanceof __c.NJb}};__c.NJb.prototype.xy=ea(66);
__c.OJb=class extends __c.MJb{increment(a){pa(a>=0);return super.increment(a)}compose(a,b){pa(a>=0);pa(b>=0);return super.compose(a,b)}transform(a,b){pa(a>=0);pa(b>=0);return super.transform(a,b)}pD(a){pa(a>=0);return 0}apply(a,b){pa(b>=0);return super.apply(a,b)}KH(a,b){pa(b>=0);return super.KH(a,b)}equals(a){return this===a||a instanceof __c.OJb}};__c.OJb.prototype.xy=ea(65);var PJb=new __c.NJb,QJb=new __c.OJb;var RJb=class extends Ll{gsb(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}increment(a){this.IQ(this.domain.increment(a))}yab(){return this.value}constructor(a,b,c){super(a);this.domain=b;this._value=new __c.PIb(c)}},SJb=class extends Ml{o$(a,b){return new RJb(a,this.domain,b)}connect(a,b){return a.connect(b)}snapshot(a){return a.snapshot()}destroy(a,b){HFb(this.domain,a.value,b)}mz(a,b){a.increment(b-a.value);return!0}},TJb=class extends SJb{K9(a,
b){return new TJb(a,b)}constructor(...a){super(...a);this.domain=PJb}},UJb=class extends SJb{mz(a,b){return b<a.value?!1:super.mz(a,b)}K9(a,b){return new UJb(a,b)}constructor(...a){super(...a);this.domain=QJb}};new TJb(pl,pl);new UJb(pl,pl);var VJb;VJb=Symbol.iterator;
__c.WJb=class{static G(a){Q(a,{empty:Jl})}get empty(){return this.first()==null}count(){return this.reduce(a=>a+1,0)}toArray(){return this.base.filter(this.predicate)}e5(){return new Map(this.map((a,b)=>[b,a]))}[VJb](){return this.toArray()[Symbol.iterator]()}first(a){const b=this.predicate;return this.base.first(c=>b(c)&&(!a||a(c)))}last(a){const b=this.predicate;return this.base.last(c=>b(c)&&(!a||a(c)))}next(a,b){pa(this.has(a));const c=this.predicate;return this.base.next(a,d=>c(d)&&(!b||b(d)))}previous(a,
b){pa(this.has(a));const c=this.predicate;return this.base.previous(a,d=>c(d)&&(!b||b(d)))}cS(a,b){const c=this.predicate;pa(c(a));pa(c(b));return this.base.cS(a,b)}has(a){const b=this.predicate;return b(a)&&this.base.has(a)}Wyb(a){const b=this.predicate;pa(b(a));return this.base.Wyb(a)}rcb(a){const b=this.predicate;return new __c.WJb(this.base,c=>b(c)&&a(c))}map(a){const b=this.predicate,c=[];this.base.forEach((d,e)=>{b(d)&&c.push(a(d,e))});return c}flatMap(a){const b=this.predicate,c=[];this.base.forEach((d,
e)=>{b(d)&&c.push(...a(d,e))});return c}filter(a){const b=this.predicate;return this.base.filter((c,d)=>b(c)&&a(c,d))}forEach(a){const b=this.predicate;this.base.forEach((c,d)=>b(c)&&a(c,d))}reduce(a,b){const c=this.predicate;return this.base.reduce((d,e)=>c(e)?a(d,e):d,b)}some(a){const b=this.predicate;return this.base.some(c=>b(c)&&a(c))}every(a){const b=this.predicate;return this.base.every(c=>b(c)&&a(c))}constructor(a,b){this.base=a;this.predicate=b;__c.WJb.G(this)}};__c.XJb=Symbol.iterator;var YJb;YJb=Symbol.iterator;
ZJb=__c.ZJb=class extends Ll{static G(a){Q(a,{RWa:Jl,empty:Jl,Gvd:Jl,$Cd:Jl})}ZFd(a){const b=__c.kl(this,d=>wHb(this).retain(this.Csa(c.mutable)).update(d).build()),c=__c.SFb(this.context,this.type,a,b);return{pC:c,id:String(this.Pia++)}}uYe(a,b){b.pC.destroy(a)}get RWa(){return this.cells.filter(__c.Ua)}get(a){return(a=this.cells[a])&&a.pC.mutable}Csa(a){return m(this.f5a.get().get(a),"ref not found")}gsb(a){const b=this.cells,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=
f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,g!=null?this.ZFd(g):void 0);h&&(d.set(h.Wj,b[e]),c.set(h.PZ,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;h!=null&&m(b[e]).pC.Nwb(h);break;case 1:h=k.oldState;k=k.newState;h==null?qa(b[e]==null):this.uYe(h,m(b[e]));b[e]=k!=null?this.ZFd(k):void 0;break;default:throw new t(k);}g&&(d.set(g.Wj,b[e]),c.set(g.PZ,e));e++;break;default:throw new t(f);
}qa(d.size===a.NMd);qa(c.size===a.NMd);for(e=0;e<a.NMd;e++)qa(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&b[b.length-1]==null;)b.length--}yab(){const a=[];this.cells.forEach((b,c)=>{b!=null&&(a[c]=b.pC.snapshot())});return a}destroy(a){let b=0;this.cells.forEach((d,e)=>{d!=null&&(pa(e in a),d.pC.destroy(a[e]),b++)});const c=a.reduce(d=>d+1,0);pa(b===c)}mz(a){const b=this.cells,c=wHb(this);for(let e=0;e<b.length;e++){const f=b[e];f!=null&&a[e]!=null&&this.type.mz(f.pC.mutable,a[e])||f==null&&
a[e]==null?c.retain():c.change(f&&f.pC.snapshot(),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.IQ(c.build());return!0}get empty(){return!this.RWa.length}count(){return this.RWa.length}toArray(){return this.RWa.map(a=>a.pC.mutable)}e5(){return new Map(this.map((a,b)=>[b,a]))}[YJb](){return this.toArray()[Symbol.iterator]()}get Gvd(){const a=this.RWa[0];return a&&a.pC.mutable}get $Cd(){const a=this.RWa[this.RWa.length-
1];return a&&a.pC.mutable}first(a){if(!a)return this.Gvd;const b=this.RWa.find(c=>a(c.pC.mutable));return b&&b.pC.mutable}last(a){if(!a)return this.$Cd;const b=this.RWa;for(let c=b.length-1;c>=0;c--){const d=b[c];if(a(d.pC.mutable))return d.pC.mutable}}next(a,b){const c=this.cells;for(a=this.Csa(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.pC.mutable)))return d.pC.mutable}}previous(a,b){const c=this.cells;for(a=this.Csa(a)-1;a>=0;a--){const d=c[a];if(d&&(!b||b(d.pC.mutable)))return d.pC.mutable}}cS(a,
b){a=this.Csa(a);b=this.Csa(b);return a<b?-1:a>b?1:0}Wyb(a){return this.cells[this.Csa(a)].id}has(a){return this.f5a.get().has(a)}insertAt(a,b){this.IQ(wHb(this).retain(a).insert(b).build());return this.cells[a].pC.mutable}set(a,b){pa(a>=0);a>=this.cells.length&&(this.cells.length=a+1);var c=this.cells[a];c=c!=null?c.pC.snapshot():void 0;this.IQ(wHb(this).retain(a).change(c,b).build());return this.cells[a].pC.mutable}replace(a,b){a=this.Csa(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,
a)}prepend(a){return this.cnb(void 0,a)}cnb(a,b){return this.insertAt(a?this.Csa(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?this.Csa(a):this.cells.length,b)}delete(a){a=wHb(this).retain(this.Csa(a)).oKa(this.type.snapshot(a)).build();this.IQ(a)}W5(a){const b=this.cells,c=wHb(this);for(let d=0;d<b.length;d++){const e=b[d];e?!a||a(e.pC.mutable)?c.oKa(e.pC.snapshot()):c.retain():c.retain()}this.IQ(c.build())}moveTo(a,b){const c=this.Csa(b);if(c===a)return b;this.IQ(c<a?wHb(this).retain(c).retain(ll(0,
1)).retain(a-c-1).expand(ll(1,0)).build():wHb(this).retain(a).expand(ll(0,1)).retain(c-a).retain(ll(1,0)).build());return b}rcb(a){return new __c.WJb(this,a)}map(a){return this.RWa.map(b=>a(b.pC.mutable,b.id))}flatMap(a){return this.RWa.flatMap(b=>a(b.pC.mutable,b.id))}filter(a){return this.RWa.filter(b=>a(b.pC.mutable,b.id)).map(b=>b.pC.mutable)}forEach(a){this.RWa.forEach(b=>b!=null&&a(b.pC.mutable,b.id))}reduce(a,b){return this.RWa.reduce((c,d)=>a(c,d.pC.mutable,d.id),b)}some(a){return this.RWa.some(b=>
a(b.pC.mutable,b.id))}every(a){return this.RWa.every(b=>a(b.pC.mutable,b.id))}constructor(a,b,c,d){super(a);this.type=b;this.domain=c;this.cells=(ZJb.G(this),void 0);this.Pia=0;this.f5a=Jl(()=>{const e=new Map;this.cells.forEach((f,g)=>f&&e.set(f.pC.mutable,g));return e});pa(!d.length||d[d.length-1]!=null);this.cells=tIb.array([...d.map(e=>this.ZFd(e))],{deep:!1})}};ZJb.prototype.Lsa=ea(114);ZJb.prototype.kzb=ea(109);ZJb.prototype.feg=ea(106);
__c.xHb=class extends Ml{Ln(){return this.domain.Ln()}mJ(a){return a}o$(a,b){return new ZJb(a,this.type,this.domain,b)}connect(a,b){return this.mJ(a).connect(b)}snapshot(a){return this.mJ(a).snapshot()}destroy(a,b){this.mJ(a).destroy(b)}mz(a,b){return this.mJ(a).mz(b)}K9(a,b){return new __c.xHb(this.type,a,b)}constructor(a,b,c){super(b,c);this.type=a;this.domain=new ZIb(this.type.domain)}};__c.xHb.prototype.wba=ea(116);__c.xHb.prototype.Mka=ea(93);__c.$Jb=Symbol.iterator;__c.aKb=class extends Kl{isIdentity(a){throw new t(a);}compose(a){throw new t(a);}transform(a){throw new t(a);}pD(a){throw new t(a);}identity(a){throw new t(a);}apply(a){throw new t(a);}KH(a){throw new t(a);}Uw(a){throw new t(a);}Qs(a){throw new t(a);}equals(a){return this===a||a instanceof __c.aKb}};__c.aKb.prototype.Ix=ea(80);__c.aKb.prototype.xy=ea(64);__c.bKb=new __c.aKb;var cKb,fKb,kKb,lKb,mKb,nKb,oKb,qKb,rKb,pKb;cKb=class{};dKb=__c.dKb=class extends cKb{get length(){return this.state.length}PYg(a){BHb(this,a);return this.state.charAt(a)}I8a(a){CHb(this,a);return[new dKb(this.state.substring(0,a)),new dKb(this.state.substring(a))]}Dsa(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;pa(!!a)}};
KHb=__c.KHb=class extends cKb{get length(){return 1}PYg(a){BHb(this,a);return this.state}I8a(a){CHb(this,a);throw Error();}Dsa(a){return new KHb(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
eKb=__c.eKb=class extends cKb{get length(){return this.state}PYg(a){BHb(this,a)}I8a(a){CHb(this,a);return[new eKb(a),new eKb(this.state-a)]}Dsa(){return this}toString(){return this.state<=7?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;pa(!!a)}};
hKb=__c.hKb=class{get length(){return this.tIb+this.Dj+this.J6i}Xi(a){return new fKb(this,a)}cursor(a,b){return new __c.gKb(this,a,b)}Dsa(a){const b=this.QZ.map(c=>c.Dsa(a));return new hKb(b,this.tIb,this.Dj,this.J6i)}Bd(){return this.QZ.map(a=>a.type===0?a.state:"").join("")}forEach(a,b){for(const c of this.QZ)switch(c.type){case 0:b.Bd&&b.Bd(c.state);break;case 1:b.item(c.state);break;case 2:b.Uz&&b.Uz(c.state);break;default:throw new t(c);}(a=Math.max(0,a-this.length))&&b.Uz&&b.Uz(a)}map(a,b){const c=
this.QZ.map(d=>{switch(d.type){case 0:return b.Bd(d.state);case 1:return b.item(d.state);case 2:return b.Uz(d.state);default:throw new t(d);}});(a=Math.max(0,a-this.length))&&c.push(b.Uz(a));return c}reduce(a,b){return this.QZ.reduce((c,d)=>{switch(d.type){case 0:return a.Bd(c,d.state);case 1:return a.item(c,d.state);case 2:return a.Uz?a.Uz(c,d.state):c;default:throw new t(d);}},b)}slice(a,b){pa(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.iKb;
const d=new __c.jKb;c=this.cursor(b);c.pBa(a);c.pBa(b-a,{item:e=>d.item(e),Bd:e=>d.jh(e),Uz:e=>d.ZCa(e)});return d.build()}toString(){return this.QZ.join("")}constructor(a,b,c,d){this.QZ=a;this.tIb=b;this.Dj=c;this.J6i=d;a=a.length?a[a.length-1]:void 0;pa(!a||a.type!==2)}};hKb.prototype.tje=ea(117);__c.iKb=new hKb([],0,0,0);
__c.jKb=class{goc(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(this.mode!=null){switch(this.mode){case 0:this.QZ.push(new dKb(this.nuf));this.PYf+=this.nuf.length;this.nuf="";break;case 2:this.QZ.push(new eKb(this.ouf));this.SUg+=this.ouf;this.ouf=0;break;default:throw new t(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.jh(a.state);case 1:return this.item(a.state);case 2:return this.ZCa(a.state);default:throw new t(a);}}jh(a){a&&(this.goc(0),this.nuf+=a);return this}item(a){this.flush();
this.QZ.push(new KHb(a));this.rbi++;return this}ZCa(a){a>0&&(this.goc(2),this.ouf+=a);return this}append(a,b=0){a.forEach(b,{Bd:c=>this.jh(c),item:c=>this.item(c),Uz:c=>this.ZCa(c)});return this}get length(){return this.PYf+this.rbi+this.SUg}build(){this.mode!==2&&this.flush();return this.length?new hKb(this.QZ,this.PYf,this.rbi,this.SUg):__c.iKb}constructor(){this.QZ=[];this.mode=void 0;this.nuf="";this.SUg=this.rbi=this.PYf=this.ouf=0}};
fKb=class{get head(){return this.iJ}get prevValue(){return this.$rf&&this.$rf.PYg(this.$rf.length-1)}hL(a){const b=m(this.iJ),c=b.length;pa(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.I8a(a),this.iJ=a[1],this.$rf=a[0];this.iJ=this.QZ[this.i++];return this.$rf=b}finish(){qa(this.iJ==null,"unconsumed reader head: {}",this.iJ)}constructor(a,b=0){this.i=0;this.$rf=void 0;this.QZ=(b=Math.max(0,b-a.length))?[...a.QZ,new eKb(b)]:a.QZ;this.iJ=this.QZ.length?this.QZ[this.i++]:void 0}};
__c.gKb=class{get prevValue(){return this.Xi.prevValue}move(a,b,c){for(c=__c.DHb(this.jle,c);a;){var d=this.Xi.head;if(d)switch(d=this.Xi.hL(b||d.type!==2?Math.min(d.length,a):d.length),d.type){case 0:c&&c.Bd&&c.Bd(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.Uz&&c.Uz(d.state);b&&(a-=d.length);break;default:throw new t(d);}else pa(b,"not enough characters or items: {}",a),c&&c.Uz&&c.Uz(a),a-=a}}pBa(a,b){this.move(a,!0,b)}EL(a,b){this.move(a,!1,b)}finish(){this.Xi.finish()}constructor(a,
b,c){this.jle=c;this.Xi=a.Xi(b)}};__c.gKb.prototype.GFd=ea(118);__c.gKb.prototype.Lsa=ea(113);kKb=class{};lKb=class extends kKb{get xOb(){return this.length}get eBb(){return this.length}NQg(a){EHb(this,a);return this.I8a(a)}MQg(a){FHb(this,a);return this.I8a(a)}I8a(a){return[new lKb(a),new lKb(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
mKb=class extends kKb{get xOb(){return 1}get eBb(){return 1}NQg(a){EHb(this,a);throw Error();}MQg(a){FHb(this,a);throw Error();}map(a){return new mKb(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
nKb=class extends kKb{get xOb(){return 0}get eBb(){return this.state.length}NQg(a){EHb(this,a);throw Error();}MQg(a){FHb(this,a);const [b,c]=this.state.I8a(a);return[new nKb(b),new nKb(c)]}map(a,b){return new nKb(this.state.Dsa(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new t(this.state);}}constructor(a){super();this.state=a;this.type=2}};
oKb=class extends kKb{get xOb(){return this.oldState.length}get eBb(){return this.newState.length}NQg(a){EHb(this,a);return this.I8a(a)}MQg(a){FHb(this,a);return this.I8a(a)}I8a(a){const [b,c]=this.oldState.I8a(a),[d,e]=this.newState.I8a(a);return[new oKb(b,d),new oKb(c,e)]}map(a,b){return new oKb(this.oldState.Dsa(b),this.newState.Dsa(b))}toString(){return this.oldState.type===2?this.newState.type===2?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:this.newState.type===2?`\u2193${this.oldState}`:
`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,b){super();this.oldState=a;this.newState=b;this.type=3;ra(a.length,b.length)}};
qKb=class{Xi(a,b){return new pKb(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new t(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new t(b);}})}Dsa(a,b){const c=this.ops.map(d=>d.map(a,b));return new qKb(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};rKb=new qKb([],0,0);
__c.sKb=class{goc(a,b,c){if(this.XBb!==a||this.yoi!==b||this.ymi!==c)switch(this.flush(),this.XBb=a,this.yoi=b,this.ymi=c,a){case 0:break;case 2:c===0&&(this.yob="");break;case 3:b===0&&(this.x5c="");c===0&&(this.yob="");break;default:throw new t(a);}}flush(){if(this.XBb!=null){switch(this.XBb){case 0:this.push(new lKb(this.acc));this.acc=0;break;case 2:var a=this.yob!=null?new dKb(this.yob):new eKb(this.acc);this.push(new nKb(a));this.yob=void 0;this.acc=0;break;case 3:a=this.x5c!=null?new dKb(this.x5c):
new eKb(this.acc);const b=this.yob!=null?new dKb(this.yob):new eKb(this.acc);this.push(new oKb(a,b));this.yob=this.x5c=void 0;this.acc=0;break;default:throw new t(this.XBb);}this.ymi=this.yoi=this.XBb=void 0}}push(a){this.ops.push(a);this.pre+=a.xOb;this.post+=a.eBb}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.H0b(a.state);case 3:return GHb(this,a.oldState,a.newState);default:throw new t(a);}}H0b(a){switch(a.type){case 0:return this.insert(a.state);
case 1:return this.insert(a.state);case 2:return this.expand(a.state);default:throw new t(a);}}retain(a){pa(a>=0);a&&(this.goc(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new mKb(a));this.pre++;this.post++;return this}expand(a){pa(a>=0);a&&(this.goc(2,void 0,2),this.acc+=a);return this}insert(a){typeof a==="string"?a&&(this.goc(2,void 0,0),this.yob+=a):(this.flush(),this.push(new nKb(new KHb(a))));return this}kqb(a){pa(a>=0);a&&(this.goc(3,
2,2),this.acc+=a);return this}$Oc(a){typeof a==="string"?a&&(this.goc(3,2,0),this.acc+=a.length,this.yob+=a):(this.flush(),this.push(new oKb(new eKb(1),new KHb(a))));return this}oKa(a){typeof a==="string"?a&&(this.goc(3,0,2),this.acc+=a.length,this.x5c+=a):(this.flush(),this.push(new oKb(new KHb(a),new eKb(1))));return this}change(a,b){typeof a==="string"?typeof b==="string"?(ra(a.length,b.length),a&&(this.goc(3,0,0),this.x5c+=a,this.yob+=b)):(ra(a.length,1),this.flush(),this.push(new oKb(new dKb(a),
new KHb(b)))):typeof b==="string"?(ra(1,b.length),this.flush(),this.push(new oKb(new KHb(a),new dKb(b)))):(this.flush(),this.push(new oKb(new KHb(a),new KHb(b))));return this}build(){this.XBb!==0&&this.flush();return new qKb(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.ymi=this.yoi=this.XBb=void 0;this.acc=0;this.yob=this.x5c=void 0}};__c.sKb.prototype.bhe=ea(119);
pKb=class{get head(){return this.iJ}finish(){qa(this.iJ==null)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new lKb(b)]:a.ops;this.i=0;this.iJ=this.ops[this.i++]}};
tKb=__c.tKb=class extends Kl{Ln(){return new __c.sKb(a=>this.component.isIdentity(a))}Kk(){return new __c.jKb}id(){return rKb}G1(){return __c.iKb}isIdentity(a){return!a.ops.length||a.ops.every(b=>b.type===0)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.Xi(0,b.pre),d=b.Xi(a.post,0),e=this.Ln();for(;;){let g=c.head;var f=d.head;if(!f)break;f.type===2?(g=void 0,f=HHb(d)):g&&(f=Math.min(g.eBb,f.xOb),g=JHb(c,f),f=__c.IHb(d,f));if(f.type===2)e.H0b(f.state);else if(g)g.type===
2?e.H0b(MHb(this,g.state,f)):f.type===0?e.op(g):g.type===0?e.op(f):g.type===1?f.type===1?e.update(this.component.compose(g.delta,f.delta)):GHb(e,NHb(this,f.oldState,g),f.newState):GHb(e,g.oldState,MHb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return il(b,a);const c=this.Ln(),d=this.Ln(),e=a.Xi(b.pre,0),f=b.Xi(a.pre,0),g=hl.builder();for(;;){var h=e.head,k=f.head;if(!h&&!k)break;h&&h.type===
2?(h=HHb(e),k=void 0):k&&k.type===2?(h=void 0,k=HHb(f)):h&&k&&(k=Math.min(h.xOb,k.xOb),h=__c.IHb(e,k),k=__c.IHb(f,k));if(h&&h.type===2)d.retain(h.eBb),c.op(h);else if(k&&k.type===2)d.op(k),c.retain(k.eBb);else if(h&&k)h.type===0||k.type===0?(d.op(k),c.op(h)):h.type===3?(d.retain(h.eBb),GHb(c,MHb(this,h.oldState,k),h.newState),__c.KFb(g,k.type===3?!__c.OHb(this,h.newState,k.newState):!this.component.isIdentity(k.delta))):k.type===3?(GHb(d,MHb(this,k.oldState,h),k.newState),c.retain(k.eBb),__c.LFb(g,
!this.component.isIdentity(h.delta))):(h=__c.jl(g,this.component.transform(h.delta,k.delta)),d.update(h.VY),c.update(h.UZ));else throw Error(`length mismatch (${a} x ${b})`);}e.finish();f.finish();return g.build(d.build(),c.build())}pD(a){if(!a.ops.length)return a;const b=this.Ln();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.pD(c.delta));break;case 2:a=c.state;a.type===2?b.retain(a.length):b.oKa(a.state);break;case 3:a=c.oldState;const d=c.newState;
a.type===2&&d.type===2?b.retain(a.length):GHb(b,d,a);break;default:throw new t(c);}return b.build()}identity(){return rKb}apply(a,b){const c=this.Kk(),d=a.Xi(b.pre);for(a=b.Xi(a.length,0);;){b=d.head;var e=a.head;if(!e)break;e.type===2?(b=void 0,e=HHb(a)):b&&(e=Math.min(b.length,e.xOb),b=d.hL(e),e=__c.IHb(a,e));if(e.type===2)c.region(e.state);else if(b)c.region(MHb(this,b,e));else break}d.finish();a.finish();return c.build()}KH(a,b){const c=this.Kk(),d=a.Xi(b.post);for(a=b.Xi(0,a.length);;){b=d.head;
var e=a.head;if(!b||!e)break;e.type===2?(b=d.hL(e.eBb),e=HHb(a)):(e=Math.min(b.length,e.eBb),b=d.hL(e),e=JHb(a,e));if(e.type===2)__c.LHb(this,b,e.state);else if(b)c.region(NHb(this,b,e));else break}d.finish();a.finish();return c.build()}Uw(a){return this.component===__c.bKb&&a instanceof hKb?a:a.Dsa(b=>this.component.Uw(b))}Qs(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.Xi();b=b.Xi();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!__c.OHb(this,c,d))return!1;a.hL(c.length);b.hL(d.length);
c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof tKb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};tKb.prototype.n$=ea(121);tKb.prototype.ipf=ea(98);tKb.prototype.Ix=ea(79);tKb.prototype.xy=ea(63);__c.PHb=new tKb(__c.bKb);Hl=__c.Hl={item:a=>{throw new t(a);}};var uKb;uKb=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.Bd);break;case 2:a.insert&&a.insert(d.Bd);break;case 1:a.delete&&a.delete(d.Bd);break;default:throw new t(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static builder(){return new RHb}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
RHb=__c.RHb=class{static insert(a,b){return(new RHb).retain(a).insert(b).build()}static delete(a,b){return(new RHb).retain(a).delete(b).build()}retain(a){pa(a>=0);a>0&&(this.WRb(0),this.rve+=a);return this}insert(a){a.length>0&&(this.WRb(2),this.lbf+=a);return this}delete(a){a>0&&(this.WRb(1),this.n7d+=a);return this}WRb(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.rve;pa(d>0);c.call(b,{type:0,Bd:d});this.pre+=this.rve;this.post+=this.rve;this.rve=0;break;case 2:b=
this.ops;c=b.push;d=this.lbf;pa(d.length>0);c.call(b,{type:2,Bd:d});this.post+=this.lbf.length;this.lbf="";break;case 1:b=this.ops;c=b.push;d=this.n7d;pa(d>0);c.call(b,{type:1,Bd:d});this.pre+=this.n7d;this.post+=this.n7d;this.n7d=0;break;case void 0:break;default:throw new t(this.mode);}this.mode=a}}build(){this.mode!==0&&this.WRb();return new uKb(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.rve=0;this.lbf="";this.n7d=0}};__c.vKb=class extends Ll{static G(a){Q(a,{Bd:Jl})}get Bd(){return this.state.get().Bd()}insert(a,b){this.IQ(__c.QHb(this.state.get(),RHb.insert(a,b)))}delete(a,b){this.IQ(__c.QHb(this.state.get(),RHb.delete(a,b)))}gsb(a){const b=SHb(this.state.get(),a);this.state.set(__c.PHb.apply(this.state.get(),a));this.subject.next(b)}yab(){return this.state.get()}destroy(a){pa(__c.PHb.Qs(this.state.get(),a))}mz(a){return __c.PHb.Qs(this.state.get(),a)}constructor(a,b,c){super(a);this.domain=b;this.state=(__c.vKb.G(this),
void 0);this.subject=new __c.wIb;this.state=new __c.PIb(c)}};__c.vKb.prototype.Gna=ea(128);var wKb=class extends __c.aJb{mJ(a){return a}o$(a,b){return new __c.vKb(a,this.domain,b)}connect(a,b){return this.mJ(a).connect(b)}snapshot(a){return this.mJ(a).snapshot()}destroy(a,b){this.mJ(a).destroy(b)}mz(a,b){return this.mJ(a).mz(b)}constructor(){super();this.domain=__c.PHb}};new wKb;var xKb,DKb,yKb,zKb;xKb=WHb({},{});
__c.CKb=class{Xi(a){return new yKb(this,a)}cursor(a,b){return new zKb(this,a,b)}forEach(a,{grad:b,di:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.nra,d.Ava);break;case 1:c&&c(d.length);break;default:throw new t(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,di:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.nra,e.Ava);case 1:return c(e.length);default:throw new t(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,di:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.nra,e.Ava):d;case 1:return b?b(d,e.length):d;default:throw new t(e);}},c)}slice(a,b){pa(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.AKb;const d=new __c.BKb;c=this.cursor(b);c.move(a);d.attrs(c.RSa,c.vlc);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).di(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.Ava))b.push(`${c}:${d!=
null?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new t(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;pa(!a||a.type!==1)}};__c.CKb.prototype.$rg=ea(129);__c.AKb=new __c.CKb([],0);
__c.EKb=class{Xi(a,b){return new DKb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.Wua);break;case 1:a.insert(b.length,b.Wua);break;default:throw new t(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.Wua);case 1:return a.insert(b.length,b.Wua);default:throw new t(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!$Hb(c.Wua,d.Wua))return!1;break;default:throw new t(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new t(a);}const c=[];__c.ZHb(a.Wua,({r:e},f)=>{e?c.push(`+"${f.toString()}":${e.Vta!=null?`"${e.Vta}"`:"null"}=>${e.Vpa!=null?`"${e.Vpa}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,
b,c){this.ops=a;this.pre=b;this.post=c}};__c.FKb=new __c.EKb([],0,0);
DKb=class{get SSa(){return this.JRf}get next(){return this._next}consume(a,b){const c=m(this._next);qa(c.type===a,"{} != {}",c.type,a);pa(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.Wua)){const f=e&&e.r;f?this.JRf[d]=f:delete this.JRf[d]}b<c.length?this._next={type:a,length:c.length-b,Wua:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.JAe&&(this._next=aIb(this.JAe,gl(this.JRf,()=>({r:void 0}))),this.JAe=0));return c.Wua}rea(a){return this.consume(0,
a)}qcc(a){return this.consume(1,a)}finish(){qa(!this._next)}constructor(a,b=0,c=0){this.i=0;this.JRf={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.JAe=Math.max(0,b-a.pre,c-a.post);!this._next&&this.JAe&&(this._next=aIb(this.JAe),this.JAe=0)}};
yKb=class{get head(){return this.iJ}get RSa(){return this.KDa}get vlc(){return this.Ydh}hL(a){var b=this.iJ;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.iJ=a<b?XHb(b-a):this.input[this.i++];return a}apply(a){__c.UHb(a.nra,a.Ava,(b,c,d)=>{c!=null&&d!=null?(this.KDa[b]=c,this.Ydh[b]=d):(delete this.KDa[b],delete this.Ydh[b])})}v_(){const a=this.iJ;if(!a||a.type===1)return xKb;this.iJ=this.input[this.i++];this.apply(a);return a}finish(){qa(!this.iJ)}constructor(a,
b=0){this.i=0;this.KDa={};this.Ydh={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,XHb(b)]:a.items;this.iJ=this.input.length?this.input[this.i++]:void 0}};
zKb=class{get pI(){return this.Xi.length-this.K$b}get RSa(){return this.Xi.RSa}get vlc(){return this.Xi.vlc}move(a,b){var c=this.jle;b=c?b?{cells:__c.AHb(c.cells,b.cells)}:c:b;pa(a>=0,"{} < 0",a);a=this.K$b+a;for(pa(a<=this.Xi.length,"{} > {}",a,this.Xi.length);this.K$b<a;){c=this.Xi.v_();const d=this.Xi.hL(a-this.K$b);this.K$b+=d;b&&b.cells&&b.cells(d,c.nra,this.RSa,c.Ava,this.vlc)}}finish(){this.Xi.v_();this.Xi.finish()}constructor(a,b,c){this.jle=c;this.K$b=0;this.Xi=new yKb(a,b)}};
__c.BKb=class{mB(a,b,c){this.eoc[a]!==c?(this.nra[a]=b,this.Ava[a]=c):(delete this.nra[a],delete this.Ava[a]);return this}attrs(a,b){__c.UHb(a,b,(c,d,e)=>this.mB(c,d,e));return this}di(a){a>0&&(Object.keys(this.nra).length&&(this.length&&(this.items.push(XHb(this.length)),this.length=0),this.items.push(WHb(this.nra,this.Ava)),__c.UHb(this.nra,this.Ava,(b,c,d)=>{if(c!=null){this.as[b]=c;this.eoc[b]=d;var e;((e=this.attributes[b])!==null&&e!==void 0?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],
delete this.eoc[b]}),this.nra={},this.Ava={}),this.length+=a,this.k9a+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),di:c=>this.di(c)});return this}build(){for(const a of __c.THb(this.as))this.mB(a,void 0,void 0);for(const a of __c.THb(this.nra))this.mB(a,void 0,void 0);Object.keys(this.nra).length?(qa(!!this.length,"attributes still open: {}",this.nra),this.items.push(XHb(this.length)),this.items.push(WHb(this.nra,this.Ava)),this.length=0,this.nra={},this.Ava={}):this.k9a-=
this.length;return new __c.CKb(this.items,this.k9a,this.attributes)}constructor(){this.items=[];this.attributes={};this.as={};this.eoc={};this.length=this.k9a=0;this.nra={};this.Ava={}}};var dIb,GKb,HKb,IKb,gIb,KKb,JKb,LKb;dIb=class{static from(a){if(a instanceof dIb)return a;if(Array.isArray(a)){const [b,c]=a;return new dIb(b,c)}return new dIb(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
GKb=class{get isEmpty(){return!this.ranges.size}slice(a,b){pa(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.ranges){var d=b<f.from||f.to<a?void 0:new dIb(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new GKb(c)}toString(){return[...this.ranges].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.ranges=a}};HKb=new GKb;
IKb=class{range(a,b){b?this.vUb.set(a,dIb.from(b)):this.vUb.delete(a);return this}ranges(a){a.forEach((b,c)=>this.vUb.set(c,dIb.from(b)));return this}build(){return this.vUb.size?new GKb(this.vUb):HKb}constructor(){this.vUb=new Map}};gIb=class{toString(){return`${this.Web||"_"}->${this.Qeb||"_"}`}constructor(a,b){this.Web=a;this.Qeb=b}};KKb=class{toString(){return`${JKb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};JKb={[0]:"R",[1]:"I"};
__c.MKb=class{Xi(a,b){return new LKb(this,a,b)}toString(){const a=this.sIb.join(""),b=[...this.ranges].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.sIb=a;this.ranges=b;this.pre=c;this.post=d}};__c.NKb=new __c.MKb([],new Map,0,0);
__c.OKb=class{append(a,b){pa(b>=0,"{} < 0",b);if(!b)return this;this.XBb===a?this.length+=b:(this.XBb!=null&&this.ops.push(new KKb(this.XBb,this.length)),this.XBb=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new t(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.AKc(a,void 0,b)}AKc(a,b,c){b=new gIb(b&&dIb.from(b),c&&dIb.from(c));this.ranges.set(a,b);return this}omc(a){a.forEach((b,
c)=>this.ranges.set(c,b));return this}build(){const a=this.XBb,b=this.length;a===0?(this.pre-=b,this.post-=b):a!=null&&this.ops.push(new KKb(a,b));return this.ops.length||this.ranges.size?new __c.MKb(this.ops,this.ranges,this.pre,this.post):__c.NKb}constructor(){this.ops=[];this.XBb=void 0;this.post=this.pre=this.length=0;this.ranges=new Map}};__c.OKb.prototype.Xpd=ea(132);
LKb=class{get next(){return this._next}get QDi(){return this.IRf}get CDg(){return this.l_d}get BAd(){return this.l_d-this.IRf}consume(a,b){const c=m(this._next);qa(c.type===a,"{} != {}",c.type,a);pa(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new KKb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}rea(a){this.consume(0,a);this.IRf+=a;this.l_d+=a}qcc(a){this.consume(1,a);this.l_d+=a}finish(){qa(!this._next)}constructor(a,b=0,c=0){this.l_d=this.IRf=this.i=
0;this.input=(b=Math.max(0,b-a.pre,c-a.post))?[...a.sIb,new KKb(0,b)]:a.sIb;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
PKb=__c.PKb=class extends Kl{Kk(){return new IKb}Ln(){return new __c.OKb}isIdentity(a){return!a.sIb.length&&!a.ranges.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of iIb(a.ranges,b.ranges)){var g=a.ranges.get(f),h=b.ranges.get(f);g&&h?(pa(bIb(g.Qeb,h.Web)),e.set(f,new gIb(g.Web,h.Qeb))):g?c.set(f,g):h&&d.set(f,h)}f=this.Ln();g=a.Xi(0,b.pre);a=b.Xi(a.post,0);b=g.next;for(h=a.next;h;){if(h.type===1)b=h.length,hIb(c,void 0,
g.CDg+a.BAd,b),a.qcc(b),f.insert(b);else if(b)b.type===1?(b=Math.min(b.length,h.length),hIb(d,a.QDi-g.BAd,void 0,-b),g.qcc(b),a.rea(b),f.insert(b)):(b=Math.min(b.length,h.length),g.rea(b),a.rea(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.omc(e);f.omc(c);f.omc(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return il(b,a);var c=new Map,d=new Map;const e=new Map,f=hl.builder();for(var g of iIb(a.ranges,b.ranges)){var h=a.ranges.get(g),
k=b.ranges.get(g);h&&k?(pa(bIb(h.Web,k.Web)),e.set(g,new gIb(k.Qeb,h.Qeb)),__c.KFb(f)):h?c.set(g,h):k&&d.set(g,k)}h=a.Xi(b.pre,0);k=b.Xi(a.pre,0);g=this.Ln();const l=this.Ln();var n=h.next;let p=k.next;for(;n||p;){if(n&&n.type===1)n=n.length,hIb(d,k.QDi+h.BAd,k.CDg+h.BAd,n),h.qcc(n),l.retain(n),g.insert(n);else if(p&&p.type===1)n=p.length,hIb(c,h.QDi+k.BAd,h.CDg+k.BAd,n),hIb(e,void 0,h.CDg+k.BAd,n),k.qcc(n),l.insert(n),g.retain(n);else if(n&&p)n=Math.min(n.length,p.length),h.rea(n),k.rea(n),l.retain(n),
g.retain(n);else throw Error(`unreachable case: ${n} x ${p}`);n=h.next;p=k.next}h.finish();k.finish();d=l.omc(d).build();c=g.omc(c).omc(e).build();ra(d.post-d.pre,b.post-b.pre);ra(c.post-c.pre,a.post-a.pre);return f.build(d,c)}pD(a){if(!a.ranges.size)return __c.NKb;const b=new Map(a.ranges);__c.cIb(a,{insert:(c,d,e)=>hIb(b,e,void 0,c)});a=Wd(b,c=>new gIb(c.Qeb,c.Web));return new __c.MKb([],a,0,0)}id(){return __c.NKb}identity(){return __c.NKb}apply(a,b){if(this.isIdentity(b)||!a.ranges.size&&!b.ranges.size)return a;
const c=this.Kk(),d=new Map(a.ranges);for(const [e,f]of b.ranges)pa(bIb(a.ranges.get(e),f.Web)),d.delete(e),c.range(e,f.Qeb);__c.cIb(b,{insert:(e,f,g)=>fIb(d,g,e)});return c.ranges(d).build()}KH(a,b){if(this.isIdentity(b)||!a.ranges.size&&!b.ranges.size)return a;const c=this.Kk(),d=new Map(a.ranges);for(const [e,f]of b.ranges)pa(bIb(a.ranges.get(e),f.Qeb)),d.delete(e),c.range(e,f.Web);__c.cIb(b,{insert:(e,f)=>fIb(d,f,-e)});return c.ranges(d).build()}Uw(a){if(a instanceof GKb)return a;const b=this.Kk();
for(const [c,d]of a.ranges)b.range(c,[d.from,d.to]);return b.build()}Qs(a,b){const c=a.ranges,d=b.ranges;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>bIb(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof PKb}constructor(){super();this.G1=HKb}};PKb.prototype.n$=ea(120);PKb.prototype.Ix=ea(78);PKb.prototype.xy=ea(62);__c.QKb=new PKb;__c.RKb=class extends Kl{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=jIb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=jIb(a.key,b.key);a=this.components[c].transform(a.value,b.value);return IFb(a,d=>({key:c,value:d}))}pD(a){return{key:a.key,value:this.components[a.key].pD(a.value)}}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,b){const c=jIb(a.key,b.key);return{key:c,
value:this.components[c].apply(a.value,b.value)}}KH(a,b){const c=jIb(a.key,b.key);return{key:c,value:this.components[c].KH(a.value,b.value)}}Uw(a){return Object.freeze({key:a.key,value:this.components[a.key].Uw(a.value)})}Qs(a,b){return a===b?!0:a.key===b.key&&this.components[a.key].Qs(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();
this.components=a}};__c.RKb.prototype.Ix=ea(77);__c.RKb.prototype.xy=ea(61);__c.SKb=class extends Kl{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}pD(a){return this.sum.pD(a)}identity(a){return this.sum.identity(kIb(this,a))}apply(a,b){return this.sum.apply(kIb(this,a),b).value}KH(a,b){return this.sum.KH(kIb(this,a),b).value}Uw(a){return this.sum.Uw(kIb(this,a)).value}Qs(a,b){return a===b||this.sum.Qs(kIb(this,a),kIb(this,b))}equals(a){return this===a||a instanceof __c.SKb&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.PWc=b;this.sum=new __c.RKb(this.components)}};__c.SKb.prototype.Ix=ea(76);__c.SKb.prototype.xy=ea(60);lIb=__c.lIb=class extends Ml{create(a,b,c){return super.create(a,b,c)}o$(a,b){const c=this.PWc(b);return this.l1[c].o$(a,b)}connect(a,b){const c=this.u8d(a);a=this.l1[c].connect(a,new __c.NFb(b,this.WVk[c]));return new __c.KIb(a,this.cqk[c])}snapshot(a){const b=this.u8d(a);return this.l1[b].snapshot(a)}destroy(a,b){const c=this.u8d(a),d=this.PWc(b);pa(c===d);this.l1[c].destroy(a,b)}mz(a,b){const c=this.u8d(a),d=this.PWc(b);return c===d&&this.l1[c].mz(a,b)}K9(a,b){return new lIb(this.l1,this.PWc,this.u8d,
a,b)}constructor(a,b,c,d,e){super(d,e);this.l1=a;this.PWc=b;this.u8d=c;this.domain=new __c.SKb(gl(this.l1,f=>f.domain),this.PWc);this.WVk=gl(this.l1,(f,g)=>h=>({key:g,value:h}));this.cqk=gl(this.l1,(f,g)=>h=>{ra(g,h.key);return h.value})}};lIb.prototype.PYj=ea(134);lIb.prototype.l3=ea(133);lIb.prototype.Tga=ea(100);lIb.prototype.Mka=ea(92);__c.TKb=class extends Kl{isIdentity(){return!0}compose(){return 1}transform(){return il(1,1)}pD(){return 1}identity(){return 1}apply(){return 1}KH(){return 1}Uw(){return 1}Qs(){return!0}equals(a){return this===a||a instanceof __c.TKb}constructor(){super();this.unit=1}};__c.TKb.prototype.Ix=ea(75);__c.TKb.prototype.xy=ea(59);var UKb=new __c.TKb;var VKb;VKb=class extends Ml{o$(a,b){return b}connect(){return{next:()=>{},complete:()=>{}}}snapshot(a){return a}destroy(){}mz(){return!0}K9(a,b){return new VKb(a,b)}constructor(...a){super(...a);this.domain=UKb}};__c.WKb=new VKb(pl,pl);var XKb;XKb=new Map;__c.YKb=class extends Kl{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>b===0)}compose(a,b){return nIb(a,b)}transform(a,b){return il(b,a)}pD(a){return a.size?Wd(a,b=>-b):a}identity(){return XKb}apply(a,b){return nIb(a,b)}KH(a,b){return nIb(a,this.pD(b))}Uw(a){return new Map(a)}Qs(a,b){return __c.mIb(a,b)}equals(a){return this===a||a instanceof __c.YKb}};__c.YKb.prototype.Ix=ea(74);__c.YKb.prototype.xy=ea(58);var ZKb;ZKb=Symbol.iterator;
var $Kb=class extends Ll{static G(a){Q(a,{values:Jl.struct})}gsb(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}yab(){return new Map(this.map)}mz(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.IQ(c);return!0}add(a){const b=this.map.get(a)||0;b>0||this.IQ(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.IQ(new Map([[a,-b]]))}has(a){return(this.map.get(a)||0)>
0}get values(){return[...oIb(this.map,a=>a>0).keys()]}[ZKb](){return this.values[Symbol.iterator]()}constructor(a,b,c){super(a);this.domain=b;this.map=($Kb.G(this),void 0);this.map=new uIb(c)}},aLb=class extends Ml{o$(a,b){return new $Kb(a,this.domain,b)}connect(a,b){return a.connect(b)}snapshot(a){return a.snapshot()}destroy(a,b){pa(this.domain.Qs(a.snapshot(),b))}mz(a,b){return a.mz(b)}K9(a,b){return new aLb(a,b)}constructor(...a){super(...a);this.domain=new __c.YKb}},bLb=new aLb(wl,wl);__c.cLb=/^#[0-9a-f]{6}$/;pa(/^[0-9a-zA-Z]+$/.test("none"));__c.dLb=RegExp("^none$|^XB[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}$");__c.Tl=H(()=>({oldState:__c.N(1),newState:__c.N(2)}));__c.Ul=H(()=>({oldState:__c.Yb(1),newState:__c.Yb(2)}));__c.Vl=H(()=>({oldState:__c.bc(1),newState:__c.bc(2)}));__c.Wl=H(()=>({oldState:__c.Zb(1),newState:__c.Zb(2)}));__c.eLb=H(()=>({oldState:__c.dc(1),newState:__c.dc(2)}));__c.fLb=H(()=>({oldState:__c.ac(1),newState:__c.ac(2)}));__c.gLb=H(()=>({oldState:__c.ec(1),newState:__c.ec(2)}));__c.hLb=H(()=>({oldState:__c.pxa(1),newState:__c.pxa(2)}));__c.Xl=H(()=>({oldState:__c.L(1),newState:__c.L(2)}));__c.Yl=H(()=>({oldState:__c.M(1),newState:__c.M(2)}));__c.iLb=H(()=>({oldState:__c.ic(1),newState:__c.ic(2)}));__c.Zl=H(()=>({oldState:__c.gc(1),newState:__c.gc(2)}));__c.jLb=H(()=>({oldState:(0,__c.kc)(1),newState:(0,__c.kc)(2)}));__c.kLb=H(()=>({oldState:E(1,__c.qi),newState:E(2,__c.qi)}));__c.lLb=H(()=>({U1a:E(2,__c.jLb)}));__c.mLb=H(()=>({oldState:__c.fc(1),newState:__c.fc(2)}));__c.nLb=H(()=>({type:__c.z("A?",1,"UPDATE")}));__c.oLb=H(()=>({type:__c.z("A?",2,"REPLACE"),oldState:__c.M(1),newState:__c.M(2)}));var pLb=__c.Ta(()=>({type:[1,__c.nLb,2,__c.oLb]}),()=>({}));__c.qLb=H(()=>({ops:(0,__c.nc)(1,pLb)}));__c.rLb=H(()=>({Kge:(0,__c.jc)(1)}));var sLb=H(()=>({}));__c.tLb=H(()=>({type:__c.z("A?",1,"UPDATE"),delta:E(1,sLb)}));__c.uLb=H(()=>({type:__c.z("A?",2,"REPLACE"),oldState:E(1,__c.ubb),newState:E(2,__c.ubb)}));var vLb=__c.Ta(()=>({type:[1,__c.tLb,2,__c.uLb]}),()=>({}));__c.wLb=H(()=>({ops:(0,__c.nc)(1,vLb)}));__c.xLb=H(()=>({oldState:__c.Ma(1,__c.ceb),newState:__c.Ma(2,__c.ceb)}));__c.yLb=H(()=>({oldState:E(1,__c.q8a),newState:E(2,__c.q8a)}));__c.zLb=H(()=>({oldState:__c.Ma(1,__c.Z8a),newState:__c.Ma(2,__c.Z8a)}));__c.ALb=H(()=>({oldState:__c.C(1,c9a),newState:__c.C(2,c9a)}));__c.BLb=H(()=>({oldState:E(1,c9a),newState:E(2,c9a)}));__c.CLb=H(()=>({oldState:__c.C(1,__c.W9a),newState:__c.C(2,__c.W9a)}));var KLb,PLb,QLb,TLb,ULb,VLb,WLb,iMb,sMb,wMb;__c.$l=Al(Bl(Nl),sl(__c.Tl));__c.am=Al(Bl(Ql),sl(__c.Ul));__c.bm=Al(Cl(Ql),sl(__c.Vl));__c.DLb=Al(Bl(Pl),sl(__c.Wl));Al(Cl(Pl),sl(__c.eLb));Al(Bl(Ql),sl(__c.fLb));__c.ELb=Al(Cl(Ql),sl(__c.gLb));__c.dm=Al(Bl(Rl),sl(__c.Ul));__c.em=Al(Cl(Rl),sl(__c.Vl));__c.FLb=Al(Bl(kJb),sl(__c.hLb));__c.GLb=Al(Bl(Dl),sl(__c.Xl));__c.fm=Al(Cl(Dl),sl(__c.Yl));__c.HLb=Al(Cl(Nl),sl(__c.iLb));__c.gm=Al(Bl(lJb),sl(__c.Zl));__c.ILb=Al(Bl(__c.ZGb(Dl,Dl)),sl(__c.jLb));
__c.JLb=xl({id:Dl,version:Pl}).pf(sl(__c.qi));KLb=__c.SGb(__c.ul(0,1,2,3,4),{[0]:1,[1]:2,[2]:3,[3]:4,[4]:5});__c.LLb=xl({type:KLb,id:Dl,version:Pl}).pf(sl(__c.C8a));__c.MLb=Al(Cl(__c.JLb),sl(__c.kLb));__c.NLb=__c.Fl({values:{app:__c.JLb},attributes:{U1a:__c.ILb}}).pf(sl(__c.lLb),sl(__c.t8a));__c.OLb=cHb(-1,1);PLb=cHb(0,100);QLb=cHb(-100,100);__c.RLb=cHb(0,1);__c.SLb=cHb(-180,180);TLb=sl(__c.Ul);ULb=sl(__c.Vl);VLb=sl(__c.Yl);WLb=sl(__c.mLb);__c.hm=Al(Bl(__c.OLb),TLb);__c.XLb=Al(Bl(PLb),TLb);
__c.YLb=Al(Bl(QLb),TLb);__c.im=Al(Bl(__c.RLb),TLb);__c.ZLb=Al(Bl(__c.SLb),TLb);Al(Cl(__c.SLb),ULb);__c.$Lb=yl(__c.cLb);__c.aMb=Al(Bl(__c.$Lb),sl(__c.Xl));__c.bMb=zl(__c.$Lb);__c.cMb=Al(Bl(__c.bMb),VLb);__c.dMb=yl(/^100%$/);__c.eMb=yl(/^[0-9]+(\.[0-9]+)?%$/);__c.fMb=yl(/^[0-9]+(\.[0-9]+)?px/);__c.gMb=__c.mHb(__c.El(__c.pHb(Dl)),sl(__c.qLb),xGb({delta:void 0},new __c.nLb({})),sl(__c.oLb));__c.hMb=bLb.K9({serialize:a=>new __c.rLb({Kge:a}),deserialize:a=>a.Kge},pl);
__c.mHb(__c.El(__c.WKb),sl(__c.wLb),xGb({delta:void 0},new __c.tLb({})),xGb({oldState:void 0,newState:void 0},new __c.uLb({})));iMb=bHb(0,10);__c.jMb=__c.vl(iMb,a=>a.length<=10);__c.kMb=Al(Bl(__c.jMb),WLb);__c.lMb=yl(pIb("L"));__c.mMb=yl(pIb("T"));__c.nMb=yl(pIb("X"));__c.oMb=Al(Bl(__c.ul(1,2,3)),sl(__c.xLb));__c.pMb=xl({text:Dl,uXb:Nl}).pf(sl(__c.q8a));__c.qMb=Al(Cl(__c.pMb),sl(__c.yLb));__c.rMb=Al(Bl(__c.ul(1,2)),sl(__c.zLb));sMb=xl({top:Ql,left:Ql}).pf(sl(c9a));__c.tMb=Al(Bl(sMb),sl(__c.ALb));
__c.uMb=Al(Cl(sMb),sl(__c.BLb));__c.vMb=xl({width:Rl,height:Rl}).pf(sl(__c.s8a));wMb=xl({top:Ql,left:Ql,height:Rl,width:Rl}).pf(sl(__c.W9a));__c.xMb=Al(Bl(wMb),sl(__c.CLb));__c.yMb=xl({text:Dl,user:Dl,brand:Dl}).pf(sl(__c.ycb));__c.zMb=xl({text:Dl,url:Dl}).pf(sl(__c.Acb));
}).call(self, self._ebd5e19490e9b70e7436d6c497657170);}

}])
//# sourceMappingURL=https://chunk-composing.canva.com/chunk-batch-sm/197_sourcemaps/450069d3b3239f91.js.map